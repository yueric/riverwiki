/**
 * jQEditor - WYSIWYG HTML Editor for Internet
 * Copyright (c) 2011, jQEditor.com All rights reserved.
 * MIT Licensed.
 * Depends: jQuery1.44+
 * Date: 2011-11-22
 * Version: 1.0.7
 *
 */
(function(b){function g(j,h){if(a){if(!j)return c;if(typeof j!=="string")return alert("log(type, msg)\u65b9\u6cd5\u7684\u53c2\u6570type\u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32"),!1;j=b.trim(j);if(h&&typeof h==="string"){c[j]||(c[j]=[]);c[j].push(h);if(typeof console==="object")switch(f+=1,h=f+"."+h,j){case "run":console.log(h);break;case "warning":console.warn(h);break;case "error":console.error(h);break;default:console.log(h)}return!0}else return c[j]?c[j]:c}}function e(a){l[a]=function(j,
f,b){return h[a](j,f,b)}}function i(){this.enabled=1;this.logs=[]}function d(){this.enabled=1;this.locked=0;this.isNeedTitle=this.isNeedPanel=1;this.title="";this.config=null;this.menuTitle=this.style="";this.menuType="Panel";this.inserthtml="base";this.killEvents=this.event=this.panel=null;this.cache=[];this.logs=[];this.callback=this.one=this.Selection=null}var c={},a=!1,f=0,j=function(){var a=new Date,j=a.getMonth()+1,f=a.getFullYear();return""+f+(j<10?"0"+j:j)+a.getDate()}(),a=typeof JQEDEBUG!==
"undefined"&&JQEDEBUG?!0:!1,l=window.jQEditor=b.editor=function(a){h.create(a);return l},k={typeof_function:"function",re_string:/string/i,re_object:/object/i,re_obj_fn:/object|function/i,IE:b.browser.msie,mozilla:b.browser.mozilla,script_path:"",returnFalse:function(){return!1},baseCmds:"Cut,Copy,Paste,Bold,Italic,Underline,StrikeThrough,InsertOrderedList,InsertUnorderedList,JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,Outdent,Indent,SubScript,SuperScript,RemoveFormat".split(","),closeStyleCmd:/bold|italic|underline|strikeThrough/i,
IE6:b.browser.msie&&b.browser.version=="6.0",IE678:b.browser.msie&&/[678]/.test(b.browser.version)};g("run","start");b.extend(l,{consts:k,eid:"",styleContent:[],styleSkin:[],init:function(){var a=0,j=0,f="",b="extend,mod,plugin,icon,lang,log,showError,showNotice,alert,hideMessage,addFilter,getHTML,setHTML,hidePanel,$,pluginExit,action,pasteHTML,execCommand,iframe,getButtonByName".split(",");g("run","init: "+b.join(","));for(a=0,j=b.length;a<j;a++)f=b[a],e(f)},config:function(a,j){return j&&a?(h.config[a]=
j,this):a&&typeof a==="object"?(h.config=b.extend(h.config,a),this):a&&typeof a==="string"?h.config[a]:h.config},get:function(a){if(/(option|body|document|window|iframe)/.test(a))return h.get(a)},setEid:function(a){h.setEid(a)},focus:function(){h.focus()},monitor:function(a){h.monitor(a)},disablePlugin:function(a){(Plugin=h.plugin(a))&&Plugin.disable()},enablePlugin:function(a){(Plugin=h.plugin(a))&&Plugin.enable()},hidePlugin:function(a){if(Plugin=h.plugin(a))return Plugin.hide(),Plugin},clickPlugin:function(a){if(a=
h.plugin(a))return a.click(h.mod("Panel"),a),a},getSubmitHtml:function(a){a&&h.setEid(a);(a=h.plugin("Cleanup"))&&a.click();return h.getHTML()}});l.init();var h={version:"1.0",config:{},bodys:{},iframes:{},documents:{},windows:{},options:{},eid:"",pluginStyle:[],plugins:{},mods:{},icons:{},defaults:{},extend:function(){},isExtend:[],plugin:function(){},mod:function(){},icon:function(){},langs:{},open:function(){},log:function(){},domFilters:{},htmlFilters:{}};h.extend=function(a,j){if(!a||typeof a!==
"string")return g("error","E.extend(name, obj)\u65b9\u6cd5\u7684\u53c2\u6570name\u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32"),this;a=b.trim(a);h.isExtend[a]?g("run","\u7f16\u8f91\u5668\u5df2\u7ecf\u5b58\u5728\u540d\u5b57\u4e3a"+a+"\u5bf9\u8c61"):(h[a]=j,h.isExtend[a]=1);return this};var m=!1;h.extend("monitor",function(a){m||(a=a||"",h.log("run","E.Event.trigger( {type:onmonitor, cmd:"+a+"} );"),h.Event.trigger({type:"onmonitor",cmd:a}),m=!0,setTimeout(function(){m=!1},300))});h.extend("get",
function(a,j){a+="s";j=j||h.eid;if(h[a]&&h[a][j])return h[a][j];else h[a]?g("warning","\u7f16\u8f91\u5668eid="+j+"\u4e0d\u5b58\u5728"):g("warning","\u7f16\u8f91\u5668\u4e0d\u5b58\u5728\u53d8\u91cf:"+a)});h.extend("setEid",function(a){if(a&&typeof a==="string"&&h.options[a]){if(a!==h.eid){h.eid=l.eid=a;var j=h.options[a].plugin,f=null,b=null;if(j&&typeof j==="object")for(var c in j)if(f=j[c],b=h.plugin(c),f&&typeof f==="object"){for(var d in f)if(b[d]){var k=f[d];if(/^(string|number|boolean)$/i.test(typeof k))b[d]=
k;else if(typeof k==="object")for(var i in k)b[d][i]=k[i]}else g("warning","\u63d2\u4ef6"+c+"\u6ca1\u6709key\u503c\uff1a"+d);typeof b.init==="function"&&b.init(b)}g("run","setEid="+a)}}else g("error","\u8bf7\u68c0\u67e5eid="+a+"\u662f\u5426\u6b63\u786e")});h.extend("alert",function(a){alert(a)});h.extend("showError",function(a,j){var f=h.mod("Message");f&&f.showError(a,j)});h.extend("showNotice",function(a,j){var f=h.mod("Message");f&&f.showNotice(a,j)});h.extend("hideMessage",function(a){var j=h.mod("Message");
j&&j.hide(a)});h.extend("$",function(a){var j=h.get("document");return b(a,j)});h.extend("log",function(a,j){return g(a,j)});i.prototype={isEnabled:function(){return this.enabled},enable:function(){this.enabled=1},disable:function(a){this.enabled=0;a&&this.log(a)},log:function(a){this.logs.push(a)}};h.extend("mod",function(a,j){if(!a||typeof a!="string")return g("error","E.mod(name, obj)\u65b9\u6cd5\u7684\u53c2\u6570 name \u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32"),0;var f;f=h.mods;if(j&&
typeof j==="object")return f[a]?(g("error","\u6a21\u5757"+a+"\u5df2\u7ecf\u5b58\u5728\uff0c\u6ce8\u518c\u5931\u8d25"),0):(g("run","\u6a21\u5757"+a+"\u6ce8\u518c\u6210\u529f"),j.name=a,f[a]=b.extend(new i,j),1);else if(f[a])return f=f[a],f.isEnabled()?f:0;else g("error","\u6a21\u5757"+a+"\u4e0d\u5b58\u5728")});d.prototype={click:function(a,j){a&&j.isNeedPanel&&a.set(j);typeof j.set===k.typeof_function&&j.set(a,j);return!0},action:function(){},getCursorElement:function(){return h.mod("Selection").getElement()},
getSelectionHtml:function(){return h.mod("Selection").getHtml()},getSelectionText:function(){return""+h.mod("Selection").getText()},getTitle:function(){var a=h.get("option"),a=h.lang(a.lang)[this.name];return typeof a=="string"?a:a&&typeof a=="object"&&a.title?a.title:"\u672a\u5b9a\u4e49"},pasteHTML:function(a){a&&h.pasteHTML(a)},panelHtml:function(){return this.cache.html},getValues:function(a){var a=a||this.panel,j={},a=a.find(":input").serializeArray();b.each(a,function(a,f){if(f.name)j[f.name]=
f.value});return j},error:function(a){var j=h.mod("Panel");j&&j.error(a);this.unlock()},notice:function(a){var j=h.mod("Panel");j&&j.notice(a)},hide:function(){var a=h.mod("Panel");a&&a.hide()},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.enabled=!0;var a=h.getButtonByName(this.name),j=a.children(),f=j.attr("_title");a.removeClass("disabled");j.attr("title",f)}},disable:function(a){if(this.enabled){this.enabled=!1;var j=h.getButtonByName(this.name),f=j.children(),
b=f.attr("_title");j.addClass("disabled");f.attr("title",b+" \u5f53\u524d\u4e0d\u53ef\u7528");a&&this.log(a)}},lock:function(a){var j=h.mod("Panel"),f=h.mod("Toolbar");if(!this.locked)this.locked=1,a==="toolbar"?f.lock():a==="panel"?this.panel&&j.lock(this.panel):(this.panel&&j.lock(this.panel),f.lock())},unlock:function(a){var j=h.mod("Panel"),f=h.mod("Toolbar");if(this.locked)this.locked=0,a==="toolbar"?f.unlock():a==="panel"?this.panel&&j.unlock(this.panel):(this.panel&&j.unlock(this.panel),f.unlock())},
islock:function(){return this.locked},log:function(a){this.logs.push(a)}};h.extend("plugin",function(a,j){var f=typeof j,c=typeof a,l=h.plugins;if(!a||c!="string"&&!b.isArray(a))return alert("E.plugin(name, obj)\u65b9\u6cd5\u7684\u53c2\u6570 name="+c+" \u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32\u6216\u6570\u7ec4"),0;if(j&&k.re_obj_fn.test(f)){var i,e;c=="string"?i=a.split(","):b.isArray(a)&&(i=a);for(var m=i.length-1;m>=0;m--)if(c=b.trim(i[m]))if(l[c])l[c].type==="base"?(l[c]=b.extend(l[c],
j),g("notice","\u57fa\u7840\u63d2\u4ef6"+c+"\u88ab\u8986\u76d6\u6dfb\u52a0")):h.alert("\u63d0\u793a\uff1a\u63d2\u4ef6 "+c+" \u5df2\u7ecf\u5b58\u5728\uff0c\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0\uff01");else{j.name=c;f==="object"?(e=new d,l[c]=b.extend(e,j)):f==="function"&&(l[c]=j);e=l[c];if(!e.type)e.type="general";e.type==="base"?g("run","\u57fa\u7840\u63d2\u4ef6"+c+"\u6dfb\u52a0\u6210\u529f"):(e.Selection=h.mod("Selection"),g("run","\u81ea\u5b9a\u4e49\u63d2\u4ef6"+c+"\u6dfb\u52a0\u6210\u529f"));if(f===
"function")break;if(typeof e.init!=k.typeof_function)e.isNeedPanel=0;if(e.lang&&typeof e.lang==="object")for(var o in e.lang)h.lang(o,e.lang[o]);if(e.icon&&typeof e.icon==="object")for(var n in e.icon)typeof e.icon[n]==="object"&&h.icon(n,e.icon[n]);e.style&&h.pluginStyle.push(e.style);if(e.depends&&b.isArray(e.depends))for(var u=0,y=e.depends.length;u<y;u++)if(a=e.depends[u],!h.mod(a)){e.disable();g("warning","\u63d2\u4ef6 "+c+"\u7f3a\u5c11\u4f9d\u8d56\u6a21\u5757: "+a);break}}return this}else return l[a]?
l[a]:null});h.extend("icon",function(a,j){if(!a||typeof a!="string")return g("error","E.icon(name, obj)\u65b9\u6cd5\u7684\u53c2\u6570 name \u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32"),0;var f=h.icons;return j&&k.re_object.test(typeof j)?(f[a]?f[a]=b.extend(f[a],j):(f[a]=j,g("run","\u6309\u94ae\u80cc\u666f\u5750\u6807"+a+"\u6dfb\u52a0\u6210\u529f")),1):f[a]?f[a]:0});h.extend("lang",function(a,j){if(!a||typeof a!="string")return g("error","E.lang(name, obj)\u65b9\u6cd5\u7684\u53c2\u6570 name \u5fc5\u987b\u662f\u6709\u6548\u7684\u5b57\u7b26\u4e32"),
0;var f=h.langs;return j&&k.re_object.test(typeof j)?(f[a]?f[a]=b.extend(f[a],j):(f[a]=j,g("run","\u8bed\u8a00\u5305"+a+"\u6dfb\u52a0\u6210\u529f")),1):f[a]?f[a]:0});h.extend("_closeStyleWithCSS",function(a){try{a.execCommand("styleWithCSS",0,!1)}catch(j){try{a.execCommand("useCSS",0,!0)}catch(f){try{a.execCommand("styleWithCSS",!1,!1)}catch(b){}}}});h.extend("focus",function(){var a=h.windows[h.eid];a&&a.focus()});h.extend("execCommand",function(a,j,f){var b=h.get("document");b?(j===null&&(j=!1),
!k.IE&&a=="BackColor"&&(a="hiliteColor"),h.focus(),b.execCommand(a,j,f),g("run","\u6267\u884c\u7f16\u8f91\u5668\u547d\u4ee4\uff1a"+a)):g("error","\u6267\u884c\u7f16\u8f91\u5668\u547d\u4ee4"+a+"\u65f6\u51fa\u73b0\u610f\u5916\uff0c\u6ca1\u6709\u5f97\u5230dom\u5bf9\u8c61")});h.extend("pasteHTML",function(a){var j=h.mod("Selection");j&&j.set(a);g("run","\u5411\u7f16\u8f91\u5668\u63d2\u5165\u5185\u5bb9\uff1a"+a)});h.extend("getHTML",function(a){var a=typeof a==="undefined"?!0:a,j=h.get("document");return a?
h.execFilter(j):j.body.innerHTML});h.extend("setHTML",function(a){var j=h.get("document");j.body.innerHTML!=a&&(h.execFilter(j,a),h.monitor("setHTML"),g("run","\u91cd\u7f6e\u7f16\u8f91\u5668\u5185\u5bb9\uff1a"+j.body.innerHTML));return 1});var o={type:"dom",dom:null,enabled:1,check:function(){return this.isEnabled()?!0:!1},isEnabled:function(){return this.enabled},enable:function(){this.enabled=1},disable:function(){this.enabled=0}};h.extend("addFilter",function(a,j){typeof j==="object"&&typeof j.replace===
"function"?j=j.type&&j.type==="html"?h.htmlFilters[a]=b.extend({},o,j):h.domFilters[a]=b.extend({},o,j):h.alert("\u63d0\u793a\uff1a\u5185\u5bb9\u8fc7\u6ee4\u5668"+a+"\u7f3a\u5c11replace\u65b9\u6cd5\u3002");return j});h.extend("execFilter",function(a,j){var f,c=h.domFilters,l=h.htmlFilters,d="",k=h.get("option");if(j){for(var i in l)if(f=l[i],b.inArray("filter."+i,k.disabled)===-1&&f.check())f.dom=a,j=f.replace(j),g("run","\u6267\u884chtml\u8fc7\u6ee4\u5668"+i);a.body.innerHTML=j}for(i in c)if(f=c[i],
b.inArray("filter."+i,k.disabled)===-1&&f.check())f.dom=a,f.replace(a),g("run","\u6267\u884cdom\u8fc7\u6ee4\u5668"+i);d=a.body.innerHTML;if(!j)for(i in l)if(f=l[i],b.inArray("filter."+i,k.disabled)===-1&&f.check())f.dom=a,d=f.replace(d),g("run","\u6267\u884chtml\u8fc7\u6ee4\u5668"+i);return d=d.replace(/^(\s|&nbsp;|<br\s?\/?>)+/i,"").replace(/(\s|&nbsp;|<br\s?\/?>)+$/i,"").replace(/^(?:<p>(?:\s|<br\s?\/?>|&nbsp;)*<\/p>)+/i,"").replace(/(?:<p>(?:\s|<br\s?\/?>|&nbsp;)*<\/p>)+$/i,"")});h.extend("getButtonByName",
function(a){return b("#"+h.eid+"-"+a)});h.extend("hidePanel",function(a,j){var f=h.mod("Menu"),c=h.mod("Panel"),g=h.mod("Toolbar"),a=a||"";j==="Panel"?c&&b(".jqe-panel:visible").size()&&(c.hide(),h.log("run","\u9690\u85cf\u9762\u677f("+a+")")):(j!=="Menu"&&c&&b(".jqe-panel:visible").size()&&(c.hide(),h.log("run","\u9690\u85cf\u9762\u677f("+a+")")),f&&b(".jqe-menu:visible").size()&&(f.hide(),h.log("run","\u9690\u85cf\u83dc\u5355("+a+")")));g&&g.resetClickButton()});h.extend("action",function(a,j){var f,
c,d=null,i=!1,k=h.mod("Panel"),e=h.mod("Menu"),m="";typeof a==="string"?(f=a,c=h.eid,m="click",g("run","\u7f16\u8f91\u5668"+c+"\u5373\u5c06\u6267\u884c\u83dc\u5355\u547d\u4ee4"+f)):(f=a.closest("[name]").attr("name"),c=a.closest(".jqeditor").attr("id"),h.setEid(c),a.is(".jqe-icon")?(m="click",g("run","\u7f16\u8f91\u5668"+c+"\u5373\u5c06\u6267\u884c\u5de5\u5177\u680f\u6309\u547d\u4ee4"+f)):a.is(".jqe-button-menu")&&(m="menu",g("run","\u7f16\u8f91\u5668"+c+"\u5373\u5c06\u6267\u884c\u5de5\u5177\u680f\u4e0b\u62c9\u6309\u94ae\u547d\u4ee4"+
f)));d=h.plugin(f);if(!d)return g("error","\u7f16\u8f91\u5668"+c+"\u547d\u4ee4"+f+"\u4e0d\u5b58\u5728"),i;if(typeof a==="object")d.target=a;if(!d.isEnabled())return d.target=null,h.showError(d.title+"\u529f\u80fd\u5904\u4e8e\u7981\u7528\u72b6\u6001"),g("run","\u7f16\u8f91\u5668"+c+"\u7684"+d.title+"\u529f\u80fd\u5904\u4e8e\u7981\u7528\u72b6\u6001\uff0c\u6267\u884c\u5931\u8d25"),i;d.event=j;l.Plugin=h.Plugin=d;if(m=="click")k&&d.isNeedPanel?i=d.click(k,d,a):e?(j&&(a=b(j.target)),i=d.click(e,d,a)):
i=d.click(null,d,a),d.event=null;else if(m=="menu"){var o=!1;d.menuType==="Panel"?(h.hidePanel("action","Menu"),o=k.isShow(d)):d.menuType==="Menu"&&(h.hidePanel("action","Panel"),o=e.isShow(d));o?h.hidePanel("action"):(i=d.menu(k,d,a),g("run","\u7f16\u8f91\u5668"+c+"\u6267\u884c\u4e86\u5de5\u5177\u680f\u4e0b\u62c9\u6309\u94ae\u547d\u4ee4"+f))}h.Event.trigger({type:"onafteraction",Plugin:d});m==="click"&&typeof d.ok==="undefined"&&typeof d.get==="undefined"&&(i&&!/(undo|redo)/i.test(f)&&h.monitor(f),
h.pluginExit());return i});h.extend("pluginExit",function(){if(h.Plugin)h.Plugin.target=null,l.Plugin=h.Plugin=null});h.extend("iframe",function(a,f,c){var d=h.config,i=a.id,e=document.createElement("iframe"),m="";if(a.contentId)if(m=b("#"+i),m.size()){m.addClass("jqeditor");if(!f||typeof f!=="object")f=m.find(".jqe-content");f.size()||(m.append('<div class="jqe-content"></div>'),f=m.find(".jqe-content"))}else alert("\u6307\u5b9a\u7684\u7f16\u8f91\u5668id="+i+"\u4e0d\u5b58\u5728\u3002\uff08E.iframe\uff09");
(!f||typeof f!=="object")&&alert("\u6ca1\u6709\u6307\u5b9aiframe\u5bb9\u5668container\u3002\uff08E.iframe\uff09");b(e).attr({frameBorder:0,name:"iframe_"+i,tabIndex:"0"});a.iframeStyle&&b(e).css(a.iframeStyle);a.autoHeight&&b(e).attr({scrolling:"no"});a.iframeSrc&&b(e).attr({src:a.iframeSrc});b(f).empty().append(e).height(a.height);f=e.contentWindow.document||e.contentDocument;if(c){f.open();m=d.DOCTYPE+'<html xmlns="'+d.xmlns+'" class="CSS1Compat" lang="zh-cn" dir="ltr" style="height:99%"><head>';
m+='<meta http-equiv="Content-Type" content="text/html; charset='+d.charset+'" />';if(l.styleContent.length)m+="<style>"+l.styleContent.join("\n")+"</style>\n";else if(a.contentCssName){var o="jqe-style-content-"+a.contentCssName;cssUrl=d.jqePath+"/skins/content_"+a.contentCssName+".css?"+(a.contentCssVersion?a.contentCssVersion:j);m+='<link id="'+o+'" href="'+cssUrl+'" type="text/css" rel="stylesheet" />'}c=c||"<p>"+d.text+"</p>";m+='</head><body id="'+i+'" style="height:99%">'+c+"</body></html>";
f.write(m);f.close()}if(a.contentEditable)k.IE?f.body.contentEditable="true":f.designMode="On";h.bodys[i]=f.body;h.iframes[i]=e;h.windows[i]=a=e.contentWindow;h.documents[i]=f;g("run","\u6784\u5efa\u7f16\u8f91\u5668"+i+"\u7684iframe\u7f16\u8f91\u5668\u533a\u57df");return{dom:f,win:a}});h.extend("create",function(a){for(var j in h.defaults)a[j]==null&&(a[j]=h.defaults[j]);j=a.id;if(h.options[j])h.alert("\u7f16\u8f91\u5668id\u91cd\u590d\uff0c\u8bf7\u66f4\u6362\uff01");else{h.options[j]=a;h.setEid(j);
h.init(a);var f=b("#"+a.contentId).val();h.iframe(a,null,f);h.Event.trigger({type:"oncreate",value:a,html:f});h.Event.trigger({type:"oncomplete",value:a,html:f});g("run","\u7f16\u8f91\u5668"+j+"\u521b\u5efa\u5b8c\u6210")}});var n=setTimeout(function(){h.ready()},5E3);b(document).ready(function(){clearTimeout(n);h.ready()});h.extend("ready",function(){var a=h.plugins,j,f;for(f in a)j=a[f],typeof j.init==="function"&&j.init(j);h.Event=h.mod("Event");h.Event.trigger({type:"onready"})});h.extend("init",
function(a){var j=a.skin,f=h.icon(j),c=[],d="jqe-style-"+j+"-"+a.id;if(f)for(var l in f)c.push(".jqe-"+j+" ."+l+"{background-position:"+f[l].XY+";}"),f[l].XY=="none"&&c.push("#"+a.id+"-"+l+" .jqe-icon{background:none;}");c.push(h.pluginStyle.join("\n"));b("head").append('<style id="'+d+'">'+c.join("\n")+"</style>");g("run","\u7f16\u8f91\u5668\u6837\u5f0f\u6dfb\u52a0\u5230head\u6807\u7b7e\u5f53\u4e2d")});h.plugin(k.baseCmds,{isNeedPanel:0,type:"base",click:function(){var a=this.name,j=h.documents[h.eid];
if(!k.IE&&/(Cut|Copy|Paste)/.test(a)){j="";switch(a){case "Cut":j="Ctrl + X";break;case "Copy":j="Ctrl + C";break;case "Paste":j="Ctrl + V"}j&&h.showError("\u63d0\u793a\uff1a\u6b64\u529f\u80fd\u4ec5\u5728IE\u6d4f\u89c8\u5668\u4e0b\u53ef\u7528\uff0c\u53ef\u4ee5\u4f7f\u7528\u5bf9\u5e94\u7684\u5feb\u6377\u952e:"+j);return!1}!k.IE&&k.closeStyleCmd.test(a)&&h._closeStyleWithCSS&&h._closeStyleWithCSS(j);h.execCommand(a);return!0}});setTimeout(function(){h.Event=h.mod("Event")},200)})(jQuery);
(function(b){b.extend("defaults",{id:"jqeditor",contentId:"content",toolbar:"default",lang:"zh-cn",skin:"default",panel:"Panel",contentCssName:"default",contentCssVersion:"",height:350,contentEditable:!0,iframeStyle:{width:"99%",height:"100%",margin:"0 5px"},autoHeight:100,toolbarTop:100,fixedClassName:"jqe-toolbar-fixed",messageSpeed:200,messageDuration:1500,PasteToText:!1,AutoCleanup:!1,plugin:{},disabled:[]});b.extend("config",{DOCTYPE:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',
xmlns:"http://www.w3.org/1999/xhtml",charset:"utf-8",text:"",jqePath:"./",toolbars:{"default":"Source,Save,Undo,Redo,Bold,Italic,Underline,StrikeThrough,SubScript,SuperScript,ForeColor,BackColor,RemoveFormat,Cleanup,PasteToText,PasteWord,JustifyLeft,JustifyCenter,JustifyRight,H1,H2,FontSize,FontName,InsertOrderedList,InsertUnorderedList,Indent,Outdent,Image,Find,Replace,BaikeLink,Link,SpecialChar,InsertTable,Video,MultiImage,Code,InsertDate,InsertTime,Reference,ClearDoc,AutoFormat,Preview,GoogleMap,Help".split(",")},
tagAndDisablePlugin:{"*":["PasteText","PasteWord","H1","H2","FontSize","FontName","Bold","Italic","Underline","Image","SubScript","SuperScript","StrikeThrough","InsertTable","HdImage","MultiImage","ForeColor","BackColor",,"Video","JustifyLeft","BaikeLink","Link","Code","GoogleMap","Reference"],a:"*",table:["H1","H2"],h2:"*",h3:"*",sub:"*",sup:"*",pre:"FontSize,Bold,H1,H2,InsertTable,HdImage,MultiImage,Video,JustifyLeft,ForeColor,Code,GoogleMap".split(","),img:"H1,H2,Font,Bold,Italic,Underline,SubScript,SuperScript,StrikeThrough,InsertTable,HdImage,HdImageGroup,ForeColor,BackColor,Video".split(","),
selectedTable:"H1,H2,BaikeLink,Link,Video,HdImage,InsertTable,SpecialChar".split(",")},ctrlKeys:{65:"",66:"Bold",73:"Italic",85:"Underline",90:"Undo",89:"Redo",81:"BaikeLink",49:"H1",97:"H1",50:"H2",98:"H2",38:"RowMoveBefore",219:"CancelAutoFormat",221:"AutoFormat",46:"ClearDoc",110:"ClearDoc",191:"PasteToText",40:"RowMoveAfter"},ctrlShiftKeys:{76:"JustifyLeft",82:"JustifyRight",67:"Cleanup",38:"RowMoveFirst",40:"RowMoveLast"}})})(jQEditor);
(function(b){b.icon("default",{Source:{XY:"-259px 0"},DocProps:{XY:"-900px -20px"},Save:{XY:"-480px -20px"},NewPage:{XY:"-520px 0"},Preview:{XY:"-420px -20px"},Templates:{XY:"-820px -20px"},Cut:{XY:"-680px 0"},Copy:{XY:"-700px 0"},Paste:{XY:"-560px 0"},PasteText:{XY:"-360px -20px"},PasteToText:{XY:"-360px -20px"},PasteWord:{XY:"-380px -20px"},Print:{XY:"-440px -20px"},SpellCheck:{XY:"-540px -20px"},Undo:{XY:"-179px -40px"},Redo:{XY:"-199px -40px"},Find:{XY:"-520px -20px"},Replace:{XY:"-500px -20px"},
SelectAll:{XY:"-400px -20px"},RemoveFormat:{XY:"-580px 0"},Bold:{XY:"-40px -40px"},BoldGroup:{XY:"-40px -40px"},Italic:{XY:"-60px -40px"},Underline:{XY:"-138px -40px"},StrikeThrough:{XY:"-120px 0"},SubScript:{XY:"-600px -40px"},SuperScript:{XY:"-620px -40px"},InsertOrderedList:{XY:"-80px -40px"},InsertUnorderedList:{XY:"-20px -40px"},Outdent:{XY:"-540px -40px"},Indent:{XY:"-400px -40px"},JustifyLeft:{XY:"-460px -40px"},AlignGroup:{XY:"-460px -40px"},JustifyCenter:{XY:"-420px -40px"},JustifyRight:{XY:"-480px -40px"},
JustifyFull:{XY:"-440px 0"},Link:{XY:"-520px -40px"},Unlink:{XY:"-640px 0"},Anchor:{XY:"-200px 0"},Image:{XY:"-900px -40px"},Flash:{XY:"-320px -20px"},InsertTable:{XY:"-580px -20px"},TableGroup:{XY:"-580px -20px"},Smiley:{XY:"-60px -20px"},SpecialChar:{XY:"-240px 0"},PageBreak:{XY:"0 -40px"},ForeColor:{XY:"-720px 0"},BackColor:{XY:"-760px 0"},About:{XY:"-340px 0"},Help:{XY:"-340px 0"},FitWindow:{XY:"-100px -20px"},Blockquote:{XY:"-220px 0"},CreateDiv:{XY:"-260px -20px"},Cleanup:{XY:"-40px 0"},InsertDate:{XY:"-140px -20px"},
InsertTime:{XY:"-160px -20px"},TableProps:{XY:"-580px -20px"},CellProps:{XY:"-600px -20px"},RemoveTable:{XY:"-620px -20px"},RemoveColumn:{XY:"-640px -20px"},RemoveRow:{XY:"-660px -20px"},ColumnInsertAfter:{XY:"-680px -20px"},ColumnInsertBefore:{XY:"-700px -20px"},RowInsertAfter:{XY:"-720px -20px"},RowInsertBefore:{XY:"-740px -20px"},ColumnMergeAfter:{XY:"-600px -20px"},RowMergeAfter:{XY:"-820px -20px"},BaikeLink:{XY:"-500px -40px"},H1:{XY:"-960px 0"},H2:{XY:"-980px 0"},HdImage:{XY:"-380px 0"},FontSize:{XY:"none"},
FontName:{XY:"none"},Video:{XY:"-320px -40px"},SpecialChar:{XY:"-239px 0"},MultiImage:{XY:"-380px -40px"},Code:{XY:"-980px -20px"},SetColumnAlignLeft:{XY:"-460px -40px"},SetColumnAlignRight:{XY:"-480px -40px"},SetColumnAlignCenter:{XY:"-420px -40px"},SetRowAlignLeft:{XY:"-460px -40px"},SetRowAlignRight:{XY:"-480px -40px"},SetRowAlignCenter:{XY:"-420px -40px"},SetRowAlignLeft:{XY:"-460px -40px"},SetRowAlignRight:{XY:"-480px -40px"},SetRowAlignCenter:{XY:"-420px -40px"},ClearDoc:{XY:"-520px 0"},InsertDate:{XY:"-140px -20px"},
InsertTime:{XY:"-160px -20px"},GoogleMap:{XY:"-940px -40px"},Reference:{XY:"-920px 0"}});b.icon("mce",{Source:{XY:"-259px 0"},DocProps:{XY:"-900px -20px"},Save:{XY:"-480px -20px"},NewPage:{XY:"-520px 0"},Preview:{XY:"-420px -20px"},Templates:{XY:"-820px -20px"},Cut:{XY:"-680px 0"},Copy:{XY:"-700px 0"},Paste:{XY:"-560px 0"},PasteText:{XY:"-360px -20px"},PasteToText:{XY:"-360px -20px"},PasteWord:{XY:"-380px -20px"},Print:{XY:"-440px -20px"},SpellCheck:{XY:"-540px -20px"},Undo:{XY:"-158px 0"},Redo:{XY:"-99px 0"},
Find:{XY:"-520px -20px"},Replace:{XY:"-500px -20px"},SelectAll:{XY:"-400px -20px"},RemoveFormat:{XY:"-580px 0"},Bold:{XY:"0 0"},BoldGroup:{XY:"0 0"},Italic:{XY:"-60px 0"},Underline:{XY:"-140px 0"},StrikeThrough:{XY:"-120px 0"},SubScript:{XY:"-600px 0"},SuperScript:{XY:"-620px 0"},InsertOrderedList:{XY:"-80px 0"},InsertUnorderedList:{XY:"-20px 0"},Outdent:{XY:"-540px 0"},Indent:{XY:"-400px 0"},JustifyLeft:{XY:"-460px 0"},AlignGroup:{XY:"-460px 0"},JustifyCenter:{XY:"-420px 0"},JustifyRight:{XY:"-480px 0"},
JustifyFull:{XY:"-440px 0"},Link:{XY:"-520px -40px"},Unlink:{XY:"-640px 0"},Anchor:{XY:"-200px 0"},Image:{XY:"-380px 0"},Flash:{XY:"-320px -20px"},InsertTable:{XY:"-580px -20px"},TableGroup:{XY:"-580px -20px"},Smiley:{XY:"-60px -20px"},SpecialChar:{XY:"-240px 0"},PageBreak:{XY:"0 -40px"},ForeColor:{XY:"-720px 0"},BackColor:{XY:"-760px 0"},About:{XY:"-340px 0"},Help:{XY:"-340px 0"},FitWindow:{XY:"-100px -20px"},Blockquote:{XY:"-220px 0"},CreateDiv:{XY:"-260px -20px"},Cleanup:{XY:"-40px 0"},InsertDate:{XY:"-140px -20px"},
InsertTime:{XY:"-160px -20px"},TableProps:{XY:"-580px -20px"},CellProps:{XY:"-600px -20px"},RemoveTable:{XY:"-620px -20px"},RemoveColumn:{XY:"-640px -20px"},RemoveRow:{XY:"-660px -20px"},ColumnInsertAfter:{XY:"-680px -20px"},ColumnInsertBefore:{XY:"-700px -20px"},RowInsertAfter:{XY:"-720px -20px"},RowInsertBefore:{XY:"-740px -20px"},ColumnMergeAfter:{XY:"-600px -20px"},RowMergeAfter:{XY:"-820px -20px"},BaikeLink:{XY:"-500px -40px"},H1:{XY:"-960px 0"},H2:{XY:"-980px 0"},FontSize:{XY:"none"},FontName:{XY:"none"},
Video:{XY:"-700px -40px"},SpecialChar:{XY:"-239px 0"},MultiImage:{XY:"-380px -40px"},Code:{XY:"-980px -20px"},SetColumnAlignLeft:{XY:"-460px -40px"},SetColumnAlignRight:{XY:"-480px -40px"},SetColumnAlignCenter:{XY:"-420px -40px"},SetRowAlignLeft:{XY:"-460px -40px"},SetRowAlignRight:{XY:"-480px -40px"},SetRowAlignCenter:{XY:"-420px -40px"},SetRowAlignLeft:{XY:"-460px -40px"},SetRowAlignRight:{XY:"-480px -40px"},SetRowAlignCenter:{XY:"-420px -40px"},ClearDoc:{XY:"-520px 0"},InsertDate:{XY:"-140px -20px"},
InsertTime:{XY:"-160px -20px"},GoogleMap:{XY:"-940px -40px"},Reference:{XY:"-920px 0"}})})(jQEditor);
(function(b){b.lang("zh-cn",{Source:"\u67e5\u770b\u6e90\u4ee3\u7801",Save:"\u4fdd\u5b58",NewPage:"\u65b0\u5efa",Preview:"\u9884\u89c8",Cut:"\u526a\u5207(Ctrl + X)",Copy:"\u590d\u5236(Ctrl + C)",Paste:"\u7c98\u8d34(Ctrl + V)",Format:"\u683c\u5f0f",Bold:"\u52a0\u7c97(Ctrl + B)",BoldGroup:"\u52a0\u7c97(Ctrl + B)",Italic:"\u503e\u659c(Ctrl + I)",Underline:"\u4e0b\u5212\u7ebf(Ctrl + U)",StrikeThrough:"\u5220\u9664\u7ebf",JustifyLeft:"\u5de6\u5bf9\u9f50",JustifyRight:"\u53f3\u5bf9\u9f50",JustifyCenter:"\u5c45\u4e2d\u5bf9\u9f50",
Outdent:"\u51cf\u5c11\u7f29\u8fdb\u91cf",Indent:"\u589e\u52a0\u7f29\u8fdb\u91cf",InsertOrderedList:"\u7f16\u53f7\u5217\u8868",InsertUnorderedList:"\u9879\u76ee\u5217\u8868",SubScript:"\u4e0b\u6807",SuperScript:"\u4e0a\u6807",RemoveFormat:"\u6e05\u9664\u683c\u5f0f",common:{auto:"\u81ea\u52a8",ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",close:"\u5173\u95ed"},Undo:"\u64a4\u6d88(Ctrl + Z)",Redo:"\u91cd\u505a(Ctrl + Y)",Font:"\u5b57\u4f53",Image:{title:"\u63d2\u5165\u56fe\u7247"},Link:{title:"\u63d2\u5165\u8d85\u94fe\u63a5"},
ForeColor:"\u5b57\u4f53\u989c\u8272",BackColor:"\u80cc\u666f\u989c\u8272",PasteText:"\u7c98\u8d34\u4e3a\u7eaf\u6587\u672c",PasteToText:"\u7eaf\u6587\u672c\u7c98\u8d34\u6a21\u5f0f",PasteWord:"\u4eceWord\u7c98\u8d34",About:"\u5173\u4e8ejQEditor",Cleanup:"\u6e90\u7801\u6e05\u7406",Help:"\u5e2e\u52a9",Insert:"\u63d2\u5165",Remove:"\u5220\u9664",InsertTable:"\u63d2\u5165\u8868\u683c",TableGroup:"\u8868\u683c",Table:"\u8868\u683c",MergeCell:"\u5408\u5e76\u5355\u5143\u683c",ColumnMergeAfter:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",
RowMergeAfter:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",CancelCellMerge:"\u53d6\u6d88\u5355\u5143\u683c\u5408\u5e76",Row:"\u884c",Column:"\u5217",Cell:"\u5355\u5143\u683c",TableProps:"\u8868\u683c\u5c5e\u6027",addTableCaption:"\u6dfb\u52a0\u8868\u683c\u540d\u79f0",RemoveTableCaption:"\u5220\u9664\u8868\u683c\u540d\u79f0",CellProps:"\u5355\u5143\u683c\u5c5e\u6027",RemoveTable:"\u5220\u9664\u6574\u4e2a\u8868\u683c",RemoveColumn:"\u5220\u9664\u5f53\u524d\u5217",RemoveRow:"\u5220\u9664\u5f53\u524d\u884c",
ColumnInsertAfter:"\u53f3\u4fa7\u63d2\u5165\u5217",ColumnInsertBefore:"\u5de6\u4fa7\u63d2\u5165\u5217",RowInsertAfter:"\u4e0b\u65b9\u63d2\u5165\u884c",RowInsertBefore:"\u4e0a\u65b9\u63d2\u5165\u884c",Append5Row:"\u884c\u5c3e\u8ffd\u52a05\u884c",Append5Column:"\u5217\u5c3e\u8ffd\u52a05\u5217",RowInsertBefore:"\u4e0a\u65b9\u63d2\u5165\u884c",addTableTitleRow:"\u6dfb\u52a0\u8868\u683c\u6807\u9898\u884c",RemoveTableTitleRow:"\u5220\u9664\u8868\u683c\u6807\u9898\u884c",TableMove:"\u79fb\u52a8",RowMoveBefore:"\u5411\u4e0a\u79fb\u52a8\u4e00\u884c",
RowMoveAfter:"\u5411\u4e0b\u79fb\u52a8\u4e00\u884c",RowMoveFirst:"\u6574\u884c\u79fb\u5230\u6700\u9876\u7aef",RowMoveLast:"\u6574\u884c\u79fb\u5230\u6700\u5e95\u7aef",SetTableWidth:"\u8868\u683c\u5bbd\u5ea6",TableWidthDefault:"\u6309\u8868\u683c\u6587\u5b57\u81ea\u9002\u5e94",TableWidthAuto:"\u6309\u9875\u9762\u5bbd\u5ea6\u81ea\u9002\u5e94",TableWidthFixed:"\u56fa\u5b9a\u4e3a\u5f53\u524d\u5217\u5bbd",TableWidthAverage:"\u5e73\u5747\u5206\u5e03\u5217\u5bbd",EmptyTable:"\u5220\u9664\u8868\u683c\u5185\u5bb9",
SetColumnWidth:"\u5217\u5bbd\u5ea6",SetColumnWidthAdd10:"\u52a010",SetColumnWidthReduce10:"\u51cf10",SetColumnWidthAdd50:"\u52a050",SetColumnWidthReduce50:"\u51cf50",SetColumnAlign:"\u6574\u5217\u5bf9\u9f50\u65b9\u5f0f",SetColumnAlignLeft:"\u5de6\u5bf9\u9f50",SetColumnAlignRight:"\u53f3\u5bf9\u9f50",SetColumnAlignCenter:"\u6c34\u5e73\u5c45\u4e2d",SetColumnValignTop:"\u5782\u76f4\u5c45\u9876",SetColumnValignCenter:"\u5782\u76f4\u5c45\u4e2d",SetRowAlign:"\u6574\u884c\u5bf9\u9f50\u65b9\u5f0f",SetRowAlignLeft:"\u5de6\u5bf9\u9f50",
SetRowAlignRight:"\u53f3\u5bf9\u9f50",SetRowAlignCenter:"\u6c34\u5e73\u5c45\u4e2d",SetRowValignTop:"\u5782\u76f4\u5c45\u9876",SetRowValignCenter:"\u5782\u76f4\u5c45\u4e2d",SetCellAlign:"\u5355\u5143\u683c\u5bf9\u9f50\u65b9\u5f0f",SetCellAlignLeft:"\u5de6\u5bf9\u9f50",SetCellAlignRight:"\u53f3\u5bf9\u9f50",SetCellAlignCenter:"\u6c34\u5e73\u5c45\u4e2d",SetCellValignTop:"\u5782\u76f4\u5c45\u9876",SetCellValignCenter:"\u5782\u76f4\u5c45\u4e2d",BaikeLink:"\u767e\u79d1\u94fe\u63a5(Ctrl + Q)",H1:"\u4e00\u7ea7\u76ee\u5f55(Ctrl + 1)",
H2:"\u4e8c\u7ea7\u76ee\u5f55(Ctrl + 2)",Search:"\u641c\u7d22",BaikeSearch:"\u767e\u79d1\u4e00\u4e0b",BaiduSearch:"\u767e\u5ea6\u4e00\u4e0b",GoogleSearch:"\u8c37\u6b4c\u4e00\u4e0b",HdImage:"\u63d2\u5165\u56fe\u7247",FontSize:"\u5b57\u53f7",FontName:"\u5b57\u4f53",Video:"\u63d2\u5165\u89c6\u9891",SpecialChar:"\u7279\u6b8a\u7b26\u53f7",AlignGroup:"\u5bf9\u9f50\u65b9\u5f0f",MultiImage:"\u6279\u91cf\u4e0a\u4f20\u56fe\u7247",Code:"\u63d2\u5165\u4ee3\u7801",AjaxUpload:"\u6b63\u5728\u4e0a\u4f20\u6587\u4ef6...",
List_123:"1,2,3...",List_a_b:"a,b,c...",List_A_B:"A,B,C...",List_i_ii:"i,ii,iii...",List_I_II:"I,II,II...",List_circle:"\u25cb \u5c0f\u5706\u5708",List_disc:"\u25cf \u5c0f\u5706\u70b9",List_square:"\u25a0 \u5c0f\u65b9\u5757",AutoFormat:"\u81ea\u52a8\u6392\u7248",CancelAutoFormat:"\u81ea\u52a8\u6392\u7248",ClearDoc:"\u6e05\u7a7a\u5185\u5bb9",InsertDate:"\u63d2\u5165\u65e5\u671f",InsertTime:"\u63d2\u5165\u65f6\u95f4","Date_Y-m-d":"Y-m-d","Date_Y/m/d":"Y/m/d","Date_Y.m.d":"Y.m.d","Date_Y\u5e74m\u6708d\u65e5":"Y\u5e74m\u6708d\u65e5",
GoogleMap:"Google\u5730\u56fe",Reference:"\u53c2\u8003\u8d44\u6599"})})(jQEditor);
(function(b){b.mod("Utils",{escape:function(b){return!b||typeof b!=="string"?b:b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/ /g,"&nbsp;")},unhtml:function(){function b(g){return e[g]}var e={"&":"&amp","<":"&lt;",'"':"&quot;",">":"&gt;"," ":"&nbsp;"};return function(i){return!i||typeof i!=="string"?i:i.replace(/[&<"> ]/g,b)}}(),checkTag:function(b){if(!b||typeof b!=="string")return b;for(var e="",i=/<(\/?\w+)/ig,d=[],c;(c=i.exec(b))!=null;)c=c[1].toLowerCase(),
/^(img|br|hr|input|link|meta|param|embed|p|area)$/i.test(c)||(c.indexOf("/")==-1?d.push(c):"/"+d[d.length-1]==c&&d.pop());d.length>6?e="\u63d0\u793a\uff1a\n"+d.length+"\u4e2a\u6807\u7b7e "+d.slice(0,6).join("-&gt;")+"... \u672a\u95ed\u5408\uff0c\u8bf7\u68c0\u67e5\u3002":d.length&&(e="\u63d0\u793a\uff1a\n\u6807\u7b7e "+d.join("-&gt;")+" \u672a\u95ed\u5408\uff0c\u8bf7\u68c0\u67e5\u3002");return e},strlen:function(b){return b&&typeof b=="string"?b.replace(/[^\x00-\xff]/g,"xx").length:0},saveToInput:function(g){g=
g||b.eid;b.options[g].textarea.value=this.get(g)},clone:function(b){for(var e=[],i=0,d=b.length;i<d;i++)e[i]=b[i];return e}})})(jQEditor,jQuery);
(function(b,g){var e=b.consts,i=[],d,c="onready,oncreate,oncomplete,onafteraction,onmonitor,onscroll,mouseover,mousedown,mouseup,click,contextmenu,keyup,keydown,paste,load,dragenter,dragover,drop,dragleave,dragend".split(",");b.mod("Event",{getElement:function(){return f.element[b.eid]},getTarget:function(){var a=this.getElement();if(a)return a.target},setElement:function(a){f.saveCursorElem(a)},handlers:{},bind:function(a,d){if(g.inArray(a,c)===-1)return b.log("warning","\u7f16\u8f91\u5668\u4e0d\u5141\u8bb8\u6ce8\u518c"+
a+"\u7c7b\u578b\u7684\u4e8b\u4ef6");a.substr(0,2)==="on"?(typeof this.handlers[a]==="undefined"&&(this.handlers[a]=[]),this.handlers[a].push(d)):f.bind(a,d);b.log("run","\u6ce8\u518c\u7f16\u8f91\u5668"+a+"\u7c7b\u578b\u4e8b\u4ef6")},trigger:function(a){if(g.inArray(a.type,c)===-1)return b.log("warning","\u7f16\u8f91\u5668\u6ca1\u6709\u6ce8\u518c"+a.type+"\u7c7b\u578b\u7684\u4e8b\u4ef6");if(this.handlers[a.type]instanceof Array){var f=this.handlers[a.type];a.option=b.get("option");a.dom=b.get("document");
b.log("event","\u89e6\u53d1\u4e8b\u4ef6"+a.type+"\uff0c\u5b58\u5728\u4e2a"+f.length+"\u6ce8\u518c\u4e8b\u4ef6");for(var d=0,h=f.length;d<h;d++)f[d](a)}},remove:function(a,f){if(this.handlers[a]instanceof Array){for(var b=this.handlers[a],c=0,d=b.length;c<d;c++)if(b[c]===f)break;b.splice(c,1)}}});d=b.Event=b.mod("Event");d.bind("oncreate",function(){var a=f;a.mousedown();a.mouseup();a.click();a.contextmenu();a.keyup();a.keydown();a.paste();a.dragenter();a.dragover();a.drop();a.dragleave();a.dragend();
a.load()});d.bind("onready",function(){a.click();a.scroll()});var a={click:function(){function a(j){var f=g(j.target);if(e.mozilla&&j.button!==0||f.closest(".jqe-menu").size()||f.closest(".jqe-panel").size()||f.closest(".jqe-toolbar").size()||f.closest(".jqe-panel-overlay").size())return!0;(g(".jqe-menu:visible").size()||g(".jqe-panel:visible").size())&&b.hidePanel()}e.IE?g(document).mousedown(a):g(window).mousedown(a)},scroll:function(){g(window).scroll(function(a){b.Event.trigger({type:"onscroll",
event:a})})}},f={element:{},bind:function(a,f){var b=this[a+"s"];g.isArray(b)&&b.push(f);return this},init:function(){this.extend("mouseover").extend("mousedown").extend("mouseup").extend("click").extend("contextmenu").extend("keyup").extend("keydown").extend("paste").extend("load");this.extend("dragenter").extend("dragover").extend("drop").extend("dragleave");this.extend("dragend");return this},extend:function(a){var f=this;f[a+"s"]=[];i[a]=0;f[a]=function(){var c=b.get("document"),h=b.get("window"),
h=a=="load"?h:c;if(e.IE&&a==="paste")h=c.body;g(h).bind(a,function(b){var c=!0,h=f[a+"s"],d,g;for(g in h)d=h[g],typeof d=="function"&&!1===d(this,b)&&(c=!1);return c})};return f},saveCursorElem:function(a){var f=this.element[b.eid]={target:a[0]},c=a.closest("a"),h=a.closest("img"),d=a.closest("h2"),g=a.closest("h3"),i=a.closest("pre"),e=a.closest("sub"),q=a.closest("sup"),s=a.closest("td,th"),r=s.closest("tr"),t=r.closest("table"),v=a.closest("ol"),w=a.closest("ul"),x=a.closest("embed");c.size()&&
(f.a=c[0]);h.size()&&(f.img=h[0]);d.size()&&(f.h2=d[0]);g.size()&&(f.h3=g[0]);i.size()&&(f.pre=i[0]);e.size()&&(f.sub=e[0]);q.size()&&(f.sup=q[0]);s.size()&&(f.cell=s[0]);r.size()&&(f.row=r[0]);t.size()&&(f.table=t[0]);x.size()&&(f.embed=x[0]);v.size()&&(f.ol=v[0]);w.size()&&(f.ul=w[0]);b.log("run","\u8bb0\u5f55\u5149\u6807\u5904\u5143\u7d20"+a[0].nodeName)}};f.init();f.bind("mouseover",function(a){a=g("body",a).attr("id");b.setEid(a)});f.bind("mousedown",function(a,b){var c=g(b.target);f.saveCursorElem(c)});
f.bind("mouseup",function(a,f){var c=g("body",a).attr("id"),h=b.mod("Menu"),d=b.mod("Selection"),i=b.mod("Toolbar");b.setEid(c);d&&d.saveRange();i&&i.updateState();h&&h.set(f,"mouseup")});f.bind("click",function(a,f){g(f.target);var c=b.mod("Selection"),h=b.mod("Menu");if(e.mozilla&&f.button!==0)return!0;c&&c.getText();h&&h.set(f,"click");if(c&&g.browser.webkit&&f.target.nodeName.toLowerCase()==="img"){var d=f.target,h=a.createRange(),h=c.getRange();h.setStartBefore(d);h.setEndAfter(d);h.selectNode(d);
c=c.get();c.removeAllRanges();c.addRange(h)}});f.bind("contextmenu",function(a,f){g(f.target);var c=b.mod("Selection"),h=b.mod("Menu");if(c&&(c=""+c.get("text"),f.ctrlKey&&c))return!0;b.hidePanel();return h?h.set(f,"contextmenu"):!0});f.bind("keyup",function(a,c){var d=b.mod("Selection"),h=b.mod("Toolbar");if(/^(37|38|39|40)$/.test(c.keyCode||c.which||c.charCode))d&&(d.saveRange(),(d=d.getElementByCursor())&&f.saveCursorElem(g(d))),h&&h.updateState()});d.bind("keydown",function(a,f){if(g.inArray(f.keyCode||
f.which||f.charCode,[16,17,18,20,27,33,34,35,36,37,38,39,40,44,45,91,113,115,118,119,122,144])>-1||f.ctrlKey||f.altKey)return!0;clearTimeout(i.keydown);i.keydown=setTimeout(function(){b.monitor("keydown")},1E3)});f.bind("load",function(){b.log("run",b.eid+" onload")})})(jQEditor,jQuery);
(function(b,g){var e=b.consts,i=b.mod("Event");b.mod("Selection",{get:function(b){b=b||"text";return"text"==b?d.get():"html"==b?d.get("html"):"cursorElement"==b||"element"==b?i.getTarget():d.getSelection()},getText:function(){return d.get()},getHtml:function(){return d.get("html")},getElement:function(){return i.getTarget()},set:function(b){d.set(b)},saveRange:function(){return d.saveRange()},getRange:function(){return d.getRange()},getElementByCursor:function(){return d.getElementByCursor()},selectedText:function(b){return d.selectedText(b)},
selectNode:function(b,a){d.init();return d.selectNode(b,a)},getBookmark:function(){d.init();return d.getBookmark()},clearBookmark:function(){return d.clearBookmark()},moveToBookmark:function(b){d.init();return d.moveToBookmark(b)}});var d={dom:null,win:null,ranges:{},init:function(){this.dom=b.get("document");this.win=b.get("window")},get:function(c){c=c||0;this.init();var a="",f=this.dom,j=this.win;if(!f||!j)return b.log("run",""),"";f.selection?a=c?f.selection.createRange().htmlText:f.selection.createRange().text:
j.getSelection?a=j.getSelection():f.getSelection&&(a=f.getSelection());return a?a:""},getHtml:function(){return this.get(1)},getSelection:function(){var b=self.win,a=self.dom;return e.IE?a.selection:b.getSelection()},set:function(c){if(c!==""){this.init();b.focus();var a=this.dom,f=this.ranges[b.eid];if(e.IE)if(f){f.select&&f.select();try{f.pasteHTML?f.pasteHTML(c):b.$("body").append(c)}catch(j){}}else b.$("body").prepend(c),b.focus();else b.Plugin&&b.Plugin.inserthtml==="base"?a.execCommand("inserthtml",
!1,c):f&&f.insertNode?(f.collapsed||f.deleteContents(),c=f.createContextualFragment(c),a=c.lastChild,f.insertNode(c),f.setStartAfter(a),f.setEndAfter(a),f.collapse(!1),c=this.win.getSelection(),c.removeAllRanges(),c.addRange(f)):g("body",a).append(c)}},getRange:function(){this.init();var b=this.win,a=this.dom,f;if(a.selection)f=a.selection.createRange();else if(b.getSelection)if(b=b.getSelection(),b.getRangeAt)try{f=b.getRangeAt(0)}catch(j){}else f=a.createRange(),f.setStart(b.anchorNode,b.anchorOffset),
f.setEnd(b.focusNode,b.focusOffset);return f},saveRange:function(){var c;this.init();c=this.getRange();return this.ranges[b.eid]=c},getElementByCursor:function(){this.init();var b=this.dom,a=this.getRange(),b=b.body;if(e.IE)b=a.item?a.item(0):a.parentElement();else try{b=a.commonAncestorContainer;for(!a.collapsed&&a.startContainer==a.endContainer&&a.startOffset-a.endOffset<2&&a.startContainer.hasChildNodes()&&(b=a.startContainer.childNodes[a.startOffset]);b.nodeType==3&&b.parentNode;)b=b.parentNode}catch(f){}return b},
getCommonAncestor:function(b){return b.startContainer||b.parentElement&&b.parentElement()||b.commonParentElement&&b.commonParentElement()},selectedText:function(c){var a=!1;if(c&&g.trim(c).length){var f=this.getRange();e.IE?f&&f.findText(c)&&(f.select(),a=!0):a=b.get("window").find(c);this.saveRange()}return a},selectNode:function(c,a){var f=b.get("document"),c=typeof c==="object"?c:f.body.childNodes[0];b.focus();f=this.saveRange();e.IE?(f.moveToElementText(c),f.select()):f.selectNodeContents(c);
typeof a!=="undefined"&&f.collapse(a)},getBookmark:function(){this.init();var b=this.dom;if(e.IE)return b=b.selection.createRange(),b.getBookmark()},clearBookmark:function(){},moveToBookmark:function(b){this.init();var a=this.dom;e.IE&&b&&a.body.createTextRange&&(a=a.body.createTextRange(),a.moveToBookmark(b),a.select())}}})(jQEditor,jQuery);
(function(b,g){function e(){for(var a=g(".jqe-toolbar"),f=0,c=a.length;f<c;f++){var d=a.eq(f),e=d.attr("eid"),o=d.parent().width(),n=d.find(".jqe-message"),p=Math.round((o-n.width())/2),q=b.get("option",e),s=g(window).scrollTop(),r=g("#"+e+" .jqe-content"),t=0;i.IE6?o+=1:o-=2;d.width(o);d.find(".jqe-list").width(o);n.css({left:p});d.parent().height(d.height());if(e&&(b.setEid(e),q=b.get("option",e)))d.removeClass(q.fixedClassName),q.toolbarTop=d.offset().top;if(i.IE6&&!s)s=document.documentElement.scrollTop;
t=r.height()+r.offset().top;s<q.toolbarTop||s>t?(d.removeClass(q.fixedClassName),i.IE6&&d.css("top",0),b.log("run","\u5de5\u5177\u680f\u53d6\u6d88\u6d6e\u52a8")):(d.addClass(q.fixedClassName),b.log("run","\u5de5\u5177\u680f\u5f00\u59cb\u6d6e\u52a8"),i.IE6&&d.css("top",s))}}var i=b.consts,d={},c=b.mod("Event"),a=0;b.mod("Toolbar",{get:function(a){a=a||b.eid;return d[a]},getMessage:function(a){a=a||b.eid;return d[a].find(".jqe-message")},set:function(a){f.init(a).setHtml().setEvent()},selected:function(a){var f=
b.getButtonByName(a.name).closest(".jqe-button"),a=g("#panel_"+a.name+", #jqe-"+a.name+"-0");g(".jqe-button-hover").removeClass("jqe-button-hover");a.is(":visible")?f.addClass("jqe-button-hover"):f.removeClass("jqe-button-hover")},updateState:function(){f.updateState()},getCurrent:function(){for(var a=g(document).scrollTop(),f=g(".jqeditor"),c="",h,i=0,e=0,n=f.length;e<n;e++)if(h=f.eq(e),i=h.offset().top,bottom=i+h.height(),maxTop=a+g(window).height(),i>=a&&bottom<maxTop||i<a&&bottom>a&&bottom<maxTop||
i>=a&&i<maxTop&&bottom>maxTop||i<a&&bottom>maxTop){c=h.attr("id");break}return c?(b.setEid(c),d[c]):null},lock:function(){this.get().children(".jqe-list").css("opacity",0.3).bind("mousedown.lock",function(){b.alert("\u63d0\u793a\uff1a\u5de5\u5177\u680f\u88ab\u9501\u5b9a\uff0c\u8bf7\u7a0d\u7b49...");return!1});f.locked=1},unlock:function(){this.get().children(".jqe-list").css("opacity",1).unbind("mousedown.lock");f.locked=0},islock:function(){return f.locked},resetClickButton:function(){f.clickButton[b.eid]=
null}});c.bind("oncreate",function(){var a=b.mod("Toolbar"),f=b.get("option");a.set(f)});c.bind("onready",function(){setTimeout(function(){e()},200)});(!g.browser.msie||g.browser.version>6)&&g(window).bind("resize",function(){clearTimeout(a);a=setTimeout(function(){e()},300)});c.bind("onafteraction",function(a){var f=b.mod("Toolbar");b.get("option");a.Plugin.type=="base"&&f.updateState();f.selected(a.Plugin)});var f={option:null,clickButton:{},locked:0,init:function(a){this.option=a;return this},
setHtml:function(){var a=this.option,f;f=b.config("toolbars");var c=null,h=a.id,e=[],o=b.lang(a.lang),n=g("#"+h),p,q,c=typeof a.toolbar==="string"&&f[a.toolbar]?f[a.toolbar]:a.toolbar&&typeof a.toolbar==="object"?a.toolbar:f["default"];e.push('<ul class="jqe-list jqe-'+a.skin+'">');for(var s=0,r=c.length;s<r;s++)p=c[s],q="",(f=b.plugin(p))?g.inArray("plugin."+p,a.disabled)>-1?(b.log("warning","\u7f16\u8f91\u5668 "+h+" \u540d\u5b57\u4e3a"+p+"\u7684\u63d2\u4ef6\u88ab\u914d\u7f6e\u6587\u4ef6\u7981\u7528\u4e86"),
f.disable()):(typeof o[p]=="string"?q=o[p]:typeof o[p]=="object"&&(q=o[p].length?o[p][0]+o[p][1]:o[p].title),f.title=q,e.push('<li id="'+h+"-"+p+'" class="jqe-button '+p+'"'),e.push(' style="'),typeof f.menu==i.typeof_function?f.icon&&f.icon.width?e.push(" width:"+(f.icon.width+12)+"px;"):typeof f.menu==i.typeof_function&&e.push(" width:34px;"):f.icon&&f.icon.width&&e.push(" width:"+f.icon.width+"px;"),e.push('"'),e.push(">"),e.push('<div style="display:inline-block;" name="'+p+'" title="'+q+'" _title="'+
q+'">'),e.push('<a onclick="return false" tabIndex="-1" hidefocus="true" '),f.icon&&(e.push(' style="'),f.icon.width&&e.push(" width:"+f.icon.width+"px;"),e.push('"')),e.push(' class="jqe-icon '+p+'" href="jqe:'+q+"("+p+')">'),e.push('<span class="jqe-icon '+p+'"'),f.icon&&(e.push(' style="'),f.icon.width&&e.push(" width:"+f.icon.width+"px;"),e.push('"')),e.push(">"),f.icon&&f.icon.text&&e.push(f.icon.text),e.push("</span>"),/(ForeColor|BackColor)/i.test(p)&&e.push('<span class="selected-color"></span>'),
e.push("</a>"),typeof f.menu==i.typeof_function&&(e.push('<a onclick="return false" tabIndex="-1" hidefocus="true" '),f.menuTitle&&e.push(' title="'+f.menuTitle+'"'),e.push(' class="jqe-button-menu" href="jqe:'+q+'"><span></span></a>')),e.push("</div>"),e.push("</li>")):b.log("warning","\u7f16\u8f91\u5668 "+h+" \u540d\u5b57\u4e3a"+p+"\u7684\u63d2\u4ef6\u4e0d\u5b58\u5728");e.push("</ul>");e.push('<div class="jqe-message"></div>');a=n.find(".jqe-toolbar");a.size()||(n.prepend('<div><div class="jqe-toolbar"></div></div>'),
a=n.find(".jqe-toolbar"));a.html(e.join("")).attr("eid",h);d[h]=a;return this},action:function(a,f){if(a.is(".jqe-icon, .jqe-button-menu"))b.action(a,f);else{var c=b.mod("Panel"),d=b.mod("Menu");if(self.locked)return!1;d&&d.hide();c&&c.hide()}},setEvent:function(){var a=this,f=d[a.option.id];f.click(function(f){a.action(g(f.target),f);return!1});f.bind("mousedown",function(f){if(a.locked)return!1;f=g(f.target).closest(".jqe-icon, .jqe-button-menu");f.size()&&(f.addClass("mousedown"),f=f.closest(".jqe-button").attr("id").split("-"),
a.clickButton[f[0]]=f[1]);return!1}).bind("mouseup",function(f){if(a.locked)return!1;f=g(f.target).closest(".jqe-icon, .jqe-button-menu");f.size()&&f.removeClass("mousedown");return!1});f.find("div[name]").bind("mouseover",function(){var f=g(this),b=f.parent(),c=b.attr("id").split("-");if(a.locked||f.hasClass("disabled")||a.clickButton[c[0]]===c[1])return!1;b.hasClass("jqe-button-hover")||b.addClass("jqe-button-hover");a.clickButton[c[0]]=null;return!1}).bind("mouseout",function(){var f=g(this),b=
f.parent(),c=b.attr("id").split("-");if(a.locked||f.hasClass("disabled")||a.clickButton[c[0]]===c[1])return!1;b.hasClass("jqe-button-hover")&&b.removeClass("jqe-button-hover");return!1});b.debug||f.bind("contextmenu",i.returnFalse);return this},updateState:function(){for(var a=b.eid,f=b.get("document"),c=i.baseCmds,d,e=!1,o=0,n=c.length;o<n;o++){d=c[o];try{e=f.queryCommandState(d)}catch(p){e=!1}e?g("#"+a+"-"+d).addClass("jqe-button-checked"):g("#"+a+"-"+d).removeClass("jqe-button-checked")}return this}}})(jQEditor,
jQuery);
(function(b,g){function e(){return"Dialog"==b.get("option").panel?a:c}var i=b.consts,d=!1;b.mod("Panel",{get:function(a){return g("#panel_"+a)},set:function(a){b.get("option");e().set(a);d=!0},hide:function(){e().hide();d=!1},error:function(a){e().error(a)},notice:function(a){e().notice(a)},lock:function(a){a.find(".jqe-panel-button input, .jqe-panel-close").css("opacity",0.3).click(function(){b.alert("\u63d0\u793a\uff1a\u7a97\u53e3\u6b63\u5728\u8fdb\u884c\u6570\u636e\u5904\u7406\uff0c\u8bf7\u7a0d\u7b49...");return!1})},
unlock:function(a){a.find(".jqe-panel-button input, .jqe-panel-close").css("opacity",1).unbind("click")},isShow:function(a){return a?(a=g("#panel_"+a.name),a.size()&&a.is(":visible")&&b.eid==a.attr("eid")):d}});var c={eid:"",cmd:"",target:null,panel:null,panel_id:"",set:function(a){var j,c;c=this.panel_id="panel_"+a.name;j=g("#"+c);b.log("run","\u5f00\u59cb\u6784\u5efa\u9762\u677f"+c);if(j.size()){if(j.is(":visible")&&b.eid==j.attr("eid"))return b.hidePanel(),j}else if(j=this.build(a),this.setSize(a),
typeof a.one==="function")a.one(j,a);this.panel=j;a.panel=j;this.reset();typeof a.callback==="function"&&a.callback(j,a);this.show(a);return j},hide:function(){var a,j=g(".jqe-panel:visible");a=j.attr("id");if(!a)return!1;if(a){a=a.replace("panel_","");a=b.plugin(a);if(a.islock())return!1;if(typeof a.onclose==="function")a.onclose(j,a);j.hide()}g(".jqe-button-hover").removeClass("jqe-button-hover");this.hideOverlay();return!0},show:function(a){b.log("run","\u5f00\u59cb\u663e\u793a\u9762\u677f("+a.name+
")");var j=this.panel,c=a.title||a.getTitle(),d=j.find(".jqe-panel-title");c?d.unbind("selectstart").bind("selectstart",function(){return!1}).show().find("strong").text(c):d.hide();this.hide();this.cmd=a.name;this.eid=b.eid;j.show().attr("eid",b.eid);b.log("run","\u9762\u677f("+a.name+")\u663e\u793a\u7ed3\u675f");this.setPosition(a);a.config&&a.config.overlay&&this.showOverlay();a=j.find(":text:visible,textarea:visible");a.size()&&a.focus()},build:function(a){var j=this,c=[],d,h=j.panel_id;c.push('<div id="'+
h+'" class="jqe-panel');a.isNeedTitle?c.push('"><div class="jqe-panel-title"><strong></strong><a name="panel-close" class="jqe-panel-close" title="\u5173\u95ed">X</a></div>'):c.push(' jqe-panel-notitle">');c.push('<form onsubmit="return false" ');if(a.form&&a.form.action){var e=a.form;e.target=e.target||"jqe_iframe_submit";e.method=e.method||"post";e.enctype=e.enctype||"multipart/form-data";c.push(' action="'+e.action+'" method="'+e.method+'" enctype="'+e.enctype+'"')}c.push(">");c.push('<div class="jqe-panel-body"><div class="jqe-panel-notice"></div>');
c.push(a.panelHtml());c.push('<div class="jqe-panel-error"></div></div>');if(typeof a.get==="function"||typeof a.ok==="function")c.push('<div class="jqe-panel-button">'),c.push('<input name="panel-submit" type="submit" value=" \u786e \u5b9a "/>'),c.push('<input name="panel-close" type="button" value=" \u53d6 \u6d88 "/>'),c.push("</div>");c.push("</form>");c.push("</div>");g("body").append(c.join(""));d=j.panel=g("#"+h);d.click(function(b){var f;f=(j.target=g(b.target)).closest("[name]").attr("name"),
b=f;return j.action(a,d,b)===!1?!1:null}).mouseover(function(){var a=g(this).attr("id").replace("panel_","");g("#"+b.eid+"-"+a).addClass("jqe-button-hover")});(c=a.killEvents)&&g.isArray(c)&&d.bind(c.join(" "),i.returnFalse);b.debug||d.bind("contextmenu",i.returnFalse);return d},setSize:function(a){var j=this.panel,c={width:600},d=g("#"+b.eid).width();a.config&&(c=g.extend(c,a.config));a=c.width<=d?c.width:d;j.css({width:a});c.height&&j.find(".jqe-panel-body").css({height:c.height});c.HEIGHT&&j.css({height:c.HEIGHT})},
setPositionWithButton:function(a){var c={width:600},d=a.target.closest(".jqe-button"),e=g("#"+b.eid).find(".jqe-toolbar"),h=e.width();a.config&&(c=g.extend(c,a.config));var a=c.width<=h?c.width:h,i=e.offset(),o=d.offset(),e=o.top+d.height()+1;c.align=="left"?c=o.left:h>a&&a>400?c=i.left+(h-a)/2-3:(c=o.left,c+a>i.left+h&&(c=c-a+d.width()));return{top:e,left:c}},setPosition:function(a){var c=a.event,d,e=a.config,h=this.panel.width(),i=this.panel.height(),o=g(document).scrollTop()||document.documentElement.scrollTop;
b.log("run","\u5f00\u59cb\u8bbe\u7f6e\u9762\u677f\u663e\u793a\u4f4d\u7f6e("+a.name+")");/^(center|middle)$/i.test(e.position)?(d=(g(window).width()-h)/2,c=o+(g(window).height()-i)/2,d={left:d,top:c}):c&&(g(c.target).closest(".jqe-button").size()?d=this.setPositionWithButton(a):(d=c.pageX-80,c=c.pageY-40,d<20&&(d=20),c<20&&(c=20),d={left:d,top:c}));g("body").css("position")=="relative"&&(c=(g(window).width()-g("body").width())/2,c>0&&(d.left-=c));return this.panel.css(d)},action:function(a,c,d){var g=
this.target,h="",d=d||g.closest("[name]").attr("name");if("panel-close"===d){if(this.hide())return b.pluginExit(),!1}else if("panel-submit"===d){if(typeof a.check==="function"&&!a.check(c,a))return!1;if(typeof a.ok==="function")a.ok(c,a)&&(this.hide(),b.monitor(a.name));else if(typeof a.get==="function"&&(h=a.get(c,a,g)))a.pasteHTML(h),this.hide(),b.monitor(a.name);b.pluginExit()}else if(a.action)return b.Plugin=a,(h=a.action(g,c,a))?(a.pasteHTML(h),this.hide(),b.monitor(a.name),b.pluginExit(),!1):
!1===h?(b.pluginExit(),!1):!0},reset:function(){var a=this.panel;a.find(".jqe-panel-error").html("").hide();a.find("form").trigger("reset");var c="",d=a.find(":text[fill=Selection]");d.size()&&((a=b.mod("Selection"))&&(c=a.get("text")),c&&d.val(c))},error:function(a){this.panel.find(".jqe-panel-error").html(a).show()},notice:function(a){this.panel.find(".jqe-panel-notice").html(a).show()},showOverlay:function(){var a=g(".jqe-panel-overlay"),b=g(document).width(),c=g(document).height();g(window).width();
var d=g(window).height();a.size()||(g("body").append('<div class="jqe-panel-overlay"></div>'),a=g(".jqe-panel-overlay"));a.show().height(c);i.IE6&&(c>=d&&(b-=21),a.width(b))},hideOverlay:function(){g(".jqe-panel-overlay").hide()}},a={show:function(){}}})(jQEditor,jQuery);
(function(b){b.mod("Confirm",{config:{info:"\u60a8\u7684\u5185\u5bb9\u8fd8\u6ca1\u6709\u4fdd\u5b58\uff01"},set:function(g){g=g||this.config.info;if(typeof window.onbeforeunload=="function")return!1;window.onbeforeunload=function(){return g};b.log("run","\u8bbe\u7f6e\u4e86\u79bb\u5f00\u63d0\u793a\uff1a"+g);return!0},clear:function(){window.onbeforeunload=null;b.log("run","\u53d6\u6d88\u4e86\u79bb\u5f00\u63d0\u793a")}})})(jQEditor);
(function(b,g){function e(a){clearTimeout(c.hidePanel);c.hidePanel=setTimeout(function(){b.hidePanel()},a)}var i=b.consts,d=!1,c={mouseover:0,mouseout:0,hidePanel:0},a=b.mod("Event");a.bind("keydown",function(){e(1E3)});a.bind("mousedown",function(){e(0)});b.mod("Menu",{add:function(a,b){f.add(a,b)},set:function(a,b){f.type=b;return f.set(a)},hide:function(){f.hide()},isShow:function(a){return a?(a=g("div[id^=jqe-"+a.name+"]"),a.size()&&a.is(":visible")&&b.eid==a.attr("eid")):d}});var f={type:"",
menu:null,click_objs:[],contextmenu_objs:[],mouseup_objs:[],add:function(a,f){this[a+"_objs"]||(this[a+"_objs"]=[]);this[a+"_objs"].push(f)},set:function(a){var f=null,c=null,d=this[this.type+"_objs"],e,i=b.mod("Selection"),n=null,p="";i&&(p=""+i.getText(),n=i.getElement(),typeof n==="object"&&g.nodeName(n,"img")&&(p=n));try{for(var q in d)if(f=d[q],f.check(p||n,a)){e="jqe-"+this.type+"-"+q;this.hide();c=this.build(e,f,n);break}}catch(s){b.log("error","\u83dc\u5355\u63d2\u4ef6"+(f.title||"\u672a\u77e5")+
"\u9047\u5230\u9519\u8bef\uff0c"+s.description+"\uff0cmenuPlugin.check: "+f.check)}return c?(this.menu=c,this.setPosition(a),this.show(),b.log("run","\u663e\u793a\u83dc\u5355\uff1a"+f.title),!1):!0},build:function(a,f,c){var d=this,e=[],i=null,n=b.get("option"),p=b.lang(n.lang),q=b.icon(n.skin),s={};menubody=f.getHtml(c);if(typeof menubody==="string")e.push('<div id="'+a+'" class="jqe-menu" eid="'+b.eid+'">'),e.push(menubody),e.push("</div>");else if(typeof menubody==="object"&&menubody.html)menubody.className?
e.push('<div id="'+a+'" class="jqe-menu '+menubody.className+'" eid="'+b.eid+'">'):e.push('<div id="'+a+'" class="jqe-menu">'),e.push(menubody.html),e.push("</div>");else if(typeof menubody==="object"){e.push('<div id="'+a+'" class="jqe-menu" eid="'+b.eid+'">');e.push('<ul class="jqe-menu-list jqe-'+n.skin+'">');for(r in menubody)if("-"===r.substr(0,1))e.push('<li menutype="1" class="jqe-menu-separator"></li>');else{if((c=p[r])&&typeof c=="object")c=c.title;e.push('<li menutype="1" menuname="'+r+
'" ');menubody[r]||e.push(' class="jqe-menu-disabled"');e.push('><a name="'+r+'" href="jqe:menu-'+r+'" onclick="return false">');e.push('<span class="jqe-menu-icon '+r);q[r]||e.push(" jqe-menu-noicon");e.push('"></span>');e.push('<span class="jqe-menu-text">'+c+"</span>");if(menubody[r]==2||typeof menubody[r]==="object"){e.push('<span class="jqe-shortcut-key"></span>');e.push('<span class="jqe-menu-arrow"></span>');e.push('</a><div class="jqe-menu jqe-submenu">');if(menubody[r]==2){if(c=b.plugin(r))e.push(c.panelHtml()),
s[r]=c}else{e.push('<ul class="jqe-menu-list jqe-'+n.skin+'">');for(subname in menubody[r]){if((c=p[subname])&&typeof c=="object")c=c.title;e.push('<li menutype="2" ');"-"===subname.substr(0,1)?e.push(' class="jqe-menu-separator">'):(e.push('><a name="'+subname+'"><span class="jqe-menu-icon '+subname),q[subname]||e.push(" jqe-menu-noicon"),e.push('"></span><span class="jqe-menu-text">'+c+"</span></a>"));e.push("</li>")}e.push("</ul>");e.push('<div class="jqe-menu-vertical-separator"></div>')}e.push("</div>")}else e.push("</a>");
e.push("</li>")}e.push("</ul>");e.push('<div class="jqe-menu-vertical-separator"></div>');e.push("</div>")}g("body").append(e.join(""));i=g("#"+a);typeof f.callback==="function"&&f.callback(i);i.click(function(a){var f=g(a.target);return f.closest("li").hasClass("jqe-menu-disabled")?!1:d.action(f.closest("a[name]"),a)}).mousedown(function(a){return g(a.target).is(":input")?!0:!1}).mouseover(function(){var a=g(this).attr("id").replace(/(^jqe-|-\d\d?$)/g,"");g("#"+b.eid+"-"+a).addClass("jqe-button-hover")});
i.find("li").hover(function(){var a=g(this),f=a.children("div.jqe-submenu");a.attr("menutype")=="1"&&i.find("div.jqe-submenu").hide();a.children("a").addClass("hover");if(f.size()){f.show();var b=g(document).scrollTop()+g(window).height(),a=f.height()+a.offset().top;a>b&&f.css("top",b-a-20)}},function(){g(this).find("a.hover").removeClass("hover")});for(var r in s)(function(a){if(typeof a.one==="function"){var f=i.find("li[menuname="+r+"]"),c=f.find(".jqe-submenu");f.click(function(a){g(a.target);
return!1});a.one(c,a);c.click(function(f){g(f.target);if(f=a.action(g(f.target),c,a))a.pasteHTML(f),b.monitor(a.name),d.hide()})}})(s[r]);return i},action:function(a,f){var c=a.attr("name");c&&b.action(c,f)&&this.menu.hide();return a.closest(".jqe-shortcut-menu").size()?!0:!1},show:function(){this.menu.show();if(i.IE6){var a=this.menu.height();this.menu.find(".jqe-menu-vertical-separator").height(a)}d=!0},hide:function(){g(".jqe-menu").unbind("click").remove();g(".jqe-button-hover").removeClass("jqe-button-hover");
d=!1},setPosition:function(a){var f;f=b.get("iframe");var c=g(f).offset(),d=g(a.target),e=g(document).scrollTop()||document.documentElement.scrollTop;d.closest(".jqe-button").size()?(d=d.closest(".jqe-button"),c=d.offset(),f=c.left,a=c.top+d.height()+1,d.addClass("jqe-button-hover")):a.button===2||d.is("img")?(f=a.clientX+c.left,a=a.clientY+c.top,this.type=="contextmenu"?(f+=10,a+=10):this.type=="mouseup"&&(a+=10),d=e+g(window).height()-this.menu.height()-20,a=a<d?a:d):(f=a.clientX+c.left,a=a.clientY+
c.top+20,d=e+g(window).height()-this.menu.height(),a>d&&(a=d-50));g("body").css("position")==="relative"&&(d=(g(window).width()-g("body").width())/2,d>0&&(f-=d));return this.menu.css({left:f,top:a})}}})(jQEditor,jQuery);
(function(b){var g=b.consts,e={},i,d,c=b.mod("Event");setTimeout(function(){i=b.mod("Confirm");d=b.mod("Selection")},300);b.mod("History",{Redo:function(){a.redo()},Undo:function(){a.undo()},ischange:function(){return a.ischange()}});c.bind("onmonitor",function(){a.ischange()&&a.add()});c.bind("oncreate",function(f){var c=f.value.id,f=f.html;a.stack[c]=[];a.bookmarks[c]=[];e[c]=f;a.pointer[c]=-1});var a={stack:[],pointer:[],last:[],bookmarks:{},ischange:function(){var a=b.eid;return b.get("document").body.innerHTML!==
this.last[a]},add:function(){var a=b.eid,c=this.pointer[a],e=this.last,k=b.get("document"),h="",m=b.plugin("Undo"),o=b.plugin("Redo"),n=this.stack[a];if(g.IE){var p=this.bookmarks[a],h=k.body.innerHTML;if(n[c]&&Math.abs(h.length-n[c].length)<5)return b.log("run","\u548c\u5f53\u524d\u5185\u5bb9\u7684\u5dee\u5f02\u592a\u5c0f\uff0c\u6ca1\u6709\u589e\u52a0\u5386\u53f2\u8bb0\u5f55"),0;i&&c>-1&&i.set();c+=1;p[c]=d.getBookmark();e[a]=k.body.innerHTML}else e[a]="",i&&c>-1&&i.set(),c+=1;this.pointer[a]=c;
n[c]=e[a];m&&m.enable();o&&o.disable();c<n.length-1&&n.splice(c+1,n.length-1-c);b.log("run","\u589e\u52a0\u4e00\u6761\u5386\u53f2\u8bb0\u5f55, pointer="+c);return 1},undo:function(){var a=b.get("document"),c=b.eid,i=this.stack[c],k=this.bookmarks[c],h=--this.pointer[c],m="",o=b.plugin("Undo"),n=b.plugin("Redo"),m=h>=0?i[h]:e[c];this.last[c]=m;g.IE?(a.body.innerHTML=m,d.moveToBookmark(k[h])):b.execCommand("Undo");n&&n.enable();h<0&&o&&o.disable();b.log("run","undo");return 1},redo:function(){var a=
b.get("document"),c=b.eid,e=this.stack[c],i=this.bookmarks[c],h=++this.pointer[c],m="",o=b.plugin("Undo"),n=b.plugin("Redo"),m=e[h];this.last[c]=m;g.IE?(a.body.innerHTML=m,d.moveToBookmark(i[h])):b.execCommand("Redo");o.enable();h>=e.length-1&&n.disable();b.log("run","redo");return 1}}})(jQEditor);
(function(b){var g,e=[];setTimeout(function(){g=b.mod("Toolbar")},200);b.mod("Message",{show:function(b,c,a){i.show(b,c=="error"?"error":"notice",a)},showError:function(b,c){this.show(b,"error",c)},showNotice:function(b,c){this.show(b,"notice",c)},change:function(b){b&&i.message&&i.message.html(b)},hide:function(){i.hide()}});b.Message=b.mod("Message");var i={message:null,show:function(d,c,a){var f=this,c=c=="error"?"red":"green",j=g.getMessage(),i=b.get("option"),k=i.messageSpeed,h=g.get().height()+
1,a=parseInt(a,10),a=isNaN(a)?i.messageDuration:a||i.messageDuration;f.message=j;j.html(d).css({color:c,top:h}).fadeIn(k);clearTimeout(e[b.eid]);e[b.eid]=setTimeout(function(){f.hide()},a)},hide:function(d){var c=b.get("option"),d=d?parseInt(d,10):0,d=isNaN(d)?c.messageSpeed:d||c.messageSpeed;this.message.fadeOut(d)}}})(jQEditor);
(function(b,g){function e(d){for(var c=b.get("document"),a,f=b.$("body")[0].childNodes,j=[],e=[],k=0,h=f.length;k<h;k++)a=f[k],1===a.nodeType?i.test(a.nodeName)?(e.length&&(j.push(e),e=[]),/^p$/i.test(a.nodeName)&&(d?g(a).html(g(a).html().replace(/^(\s|&nbsp;|\u3000)*/i,"\u3000\u3000")):g(a).html(g(a).html().replace(/^(\s|&nbsp;|\u3000)*/i,"")))):e.push(a):3===a.nodeType&&g.trim(a.nodeValue)&&e.push(a);e.length&&j.push(e);k=0;for(h=j.length;k<h;k++){d=c.createElement("p");a=j[k];b.$(a[0]).before(d);
f=0;for(e=a.length;f<e;f++)b.$(d).append(a[f])}}var i=/^(blockquote|center|div|h[\d]|p)$/i;b.plugin("AutoFormat",{icon:{width:60,text:"\u81ea\u52a8\u6392\u7248","default":{AutoFormat:{XY:"none"}}},click:function(){e(!0);b.showNotice("\u6bb5\u843d\u9996\u884c\u81ea\u52a8\u7f29\u8fdb\u5b8c\u6210")}});b.plugin("CancelAutoFormat",{icon:{width:60,text:"\u81ea\u52a8\u6392\u7248","default":{CancelAutoFormat:{XY:"none"}}},click:function(){e(!1);b.showNotice("\u53d6\u6d88\u6bb5\u843d\u9996\u884c\u81ea\u52a8\u7f29\u8fdb\u5b8c\u6210")}})})(jQEditor,
jQuery);
(function(b){b.plugin("ForeColor, BackColor",{menuTitle:"\u989c\u8272\u9762\u677f",isNeedPanel:1,isNeedTitle:0,killEvents:["mousedown"],config:{width:230,height:160,colors:["000000,993300,333300,003300,003366,000080,333399,333333","800000,FF6600,808000,008000,008080,0000FF,666699,808080","FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999","FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0","FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF"]},selectedColor:{},init:function(b){var e=[],
i,d,c=b.config.colors;e.push('<span class="jqe-plugin-color" color="Transparent" style="width:206px;line-height:25px;"><a href="color:Transparent" onclick="return false;" style="width:16px;height:16px;background:#000;"></a>\u4f7f\u7528\u9ed8\u8ba4\u989c\u8272</span>');for(var a=0;a<c.length;a++){d=c[a].split(",");for(var f=0;f<d.length;f++)i='<a href="color:#'+d[f]+'" style="background:#'+d[f]+'"  onclick="return false;"></a>',i='<span class="jqe-plugin-color" color="#'+d[f]+'">'+i+"</span>",e.push(i)}b.cache.html=
e.join("")},click:function(g,e){var i=e.selectedColor[b.eid];i||(i="ForeColor"==e.name?"blue":"yellow");e.setColor(i);e.hide();return 1},menu:function(b,e){b.set(e);return 1},action:function(g,e,i){e=i.name;if(g=g.closest("[color]").attr("color"))i.selectedColor[b.eid]=g,$("#"+b.eid+"-"+e).find(".selected-color").css("background-color",g),i.setColor(g),b.monitor(e),i.hide();return!1},setColor:function(g){var e=this.name;b.execCommand(e,!1,g||"Transparent")}})})(jQEditor);
(function(b){var g=/^http:\/\/(\w+\.){0,3}(?:hudong|baike)\.com/i,e=typeof g_filterExternal==="undefined"?0:g_filterExternal;b.plugin("Link",{config:{width:320},init:function(b){b.cache.html='<table border="0" width="100%"><tr><td width="60">\u6587 \u5b57\uff1a</td><td height="25" align="left"><input type="text" style="width:220px;" name="text" maxlength="200" fill="Selection"/></td></tr><tr><td>\u7f51 \u5740\uff1a</td><td height="25" align="left"><input type="text" value="http://" style="width:220px;" name="url" maxlength="250"/></td></tr><tr><td>\u6253 \u5f00\uff1a</td><td align="left"><select name="target"><option value="_blank">\u5728\u65b0\u7a97\u53e3</option><option value="_self">\u5728\u672c\u7a97\u53e3</option></select></td></tr></table>'},
get:function(b,d){var c=d.getValues(),a="";c.text&&c.url?a='<a href="'+c.url+'" target="'+c.target+'">'+c.text+"</a>":c.text?c.url||d.error("\u8bf7\u8f93\u5165\u8d85\u94fe\u63a5\u7f51\u5740"):d.error("\u8bf7\u8f93\u5165\u8d85\u94fe\u63a5\u6587\u5b57");return a},check:function(b,d){var c=d.getValues();if(/^([\w]+\.){0,3}(hudong|baike)\.com$/i.test(location.hostname)){if(!g.test(c.url))return d.error("\u63d0\u793a\uff1a\u4e3a\u907f\u514d\u5916\u94fe\u5e7f\u544a\uff0c\u4ec5\u5141\u8bb8\u4e92\u52a8\u767e\u79d1\u7684\u94fe\u63a5"),
!1}else if(e&&c.url.indexOf("http:")==0&&c.url.indexOf(location.hostname)<0)return d.error("\u63d0\u793a\uff1a\u4e3a\u907f\u514d\u5916\u94fe\u5e7f\u544a\uff0c\u4ec5\u5141\u8bb8\u6dfb\u52a0\u672c\u7ad9\u7684\u94fe\u63a5"),!1;return!0}})})(jQEditor);
(function(b,g){var e=0,i=b.mod("Menu"),d=b.mod("Event");b.plugin("InsertTable",{menuType:"Menu",menuTitle:"\u8868\u683c\u64cd\u4f5c",isNeedTitle:0,depends:["Panel","Selection"],config:{width:280},init:function(a){for(var f=['<table id="jqe-plugin-table" class="jqe-plugin-table">'],c=1;c<=10;c++){f.push("<tr>");for(var b=1;b<=12;b++)f.push('<td ij="'+c+"-"+b+'"><a href="jqe:\u70b9\u51fb\u63d2\u5165\u4e00\u4e2a'+c+"\u884c"+b+'\u5217\u7684\u8868\u683c" title="'+c+"\u884c"+b+'\u5217, \u70b9\u51fb\u63d2\u5165" onclick="return false;">&nbsp;</a></td>');
f.push("</tr>")}f.push('<tr><td colspan="12" style="text-align:left;color:#666666;">');f.push('&nbsp;\u8868\u683c\u5bbd <input name="width" style="width:40px;" maxlength="4" value="600"/>');f.push('<span class="jqe-plugin-table-xtrxtd">x\u884cx\u5217</span></td></tr>');f.push("</table>");a.cache.html=f.join("")},one:function(a,f){var f=this,c=a.find(".jqe-plugin-table td[ij]");c.mouseover(function(){var b=g(this);clearTimeout(e);e=setTimeout(function(){f.hightLight(b,c,a)},100)})},hightLight:function(a,
f,c){var b=a.attr("ij").split("-"),a=b[0],b=b[1];f.removeClass("hover");for(var d=1;d<=a;d++)for(var e=1;e<=b;e++)f.filter('[ij="'+d+"-"+e+'"]').addClass("hover");c.find(".jqe-plugin-table-xtrxtd").text(a+"\u884c "+b+"\u5217")},action:function(a,c,b){var a=a.closest("[ij]"),c=c.find("input[name=width]"),d=g.trim(c.val());if(!a.size())return!1;if(!d||!/^(\d{0,4}|\d{1,3}%)$/.test(d))d="";d&&c.val(d);a=a.attr("ij").split("-");ix=a[0];jx=a[1];b.hide();b=['<table class="jqe-table" width="'+d+'" border="1" bordercolor="#cccccc">'];
b.push("<tbody>");b.push("<tr>");for(a=1;a<=jx;a++)b.push("<th>&nbsp;&nbsp;</th>");b.push("</tr>");for(c=1;c<=ix;c++){b.push("<tr>");for(a=1;a<=jx;a++)b.push("<td>&nbsp;&nbsp;</td>");b.push("</tr>")}b.push("</tbody></table><br />");return b.join("")},menu:function(a,c){b.mod("Menu").set(c.event,c.name);return 1}});i.add("InsertTable",{title:"\u8868\u683c\u4e0b\u62c9\u83dc\u5355",check:function(){return!0},getHtml:function(){var a=d.getElement(),c=null,b,e;if(a)b=a.table,e=a.cell;if(b){if(a=b.getElementsByTagName("th"),
b=b.caption,c={InsertTable:0,addTableTitleRow:1,RemoveTableTitleRow:1,addTableCaption:1,RemoveTableCaption:1,Insert:{RowInsertBefore:1,RowInsertAfter:1,ColumnInsertBefore:1,ColumnInsertAfter:1,Append5Row:1,Append5Column:1},Remove:{RemoveRow:1,RemoveColumn:1,EmptyTable:1,RemoveTable:1},MergeCell:{ColumnMergeAfter:1,RowMergeAfter:1,CancelCellMerge:1},"-a":1,SetTableWidth:{TableWidthDefault:1,TableWidthAuto:1,TableWidthFixed:1,TableWidthAverage:1},SetColumnWidth:{SetColumnWidthAdd10:1,SetColumnWidthReduce10:1,
SetColumnWidthAdd50:1,SetColumnWidthReduce50:1},SetColumnAlign:{SetColumnAlignLeft:1,SetColumnAlignRight:1,SetColumnAlignCenter:1,SetColumnValignTop:1,SetColumnValignCenter:1},SetRowAlign:{SetRowAlignLeft:1,SetRowAlignRight:1,SetRowAlignCenter:1,SetRowValignTop:1,SetRowValignCenter:1},SetCellAlign:{SetCellAlignLeft:1,SetCellAlignRight:1,SetCellAlignCenter:1,SetCellValignTop:1,SetCellValignCenter:1},TableMove:{RowMoveBefore:1,RowMoveAfter:1,RowMoveFirst:1,RowMoveLast:1}},b&&b.innerHTML?delete c.addTableCaption:
delete c.RemoveTableCaption,a.length?delete c.addTableTitleRow:delete c.RemoveTableTitleRow,e.rowSpan==1&&e.colSpan==1)c.MergeCell.CancelCellMerge=0}else c={InsertTable:a?2:0,addTableTitleRow:0,RemoveTableTitleRow:0,addTableCaption:0,RemoveTableCaption:0,Insert:0,Remove:0,MergeCell:0,"-a":1,SetTableWidth:0,SetColumnWidth:0,SetColumnAlign:0,SetRowAlign:0,SetCellAlign:0,TableMove:0};return c}});i.add("contextmenu",{title:"\u4e00\u4e2a\u53f3\u952e\u83dc\u5355\uff0c\u6ca1\u6709\u9009\u4e2d\u5185\u5bb9\u65f6\u89e6\u53d1",
check:function(a,c){if(a&&typeof a=="object")if(/^(h2|h3|img|a)$/i.test(a.nodeName))return!1;else if(/^(td|th|caption)$/i.test(a.nodeName))return!0;else{if(c.ctrlKey)return!0}else return!1},getHtml:function(a){var c={Redo:1,Undo:1},d=b.$(a).closest("td,th"),a=b.$(a).closest("a");if(d.size()){if(c=d.closest("tr"),a=c.closest("table"),d=d[0],a=a[0],th=a.getElementsByTagName("th"),c={addTableTitleRow:1,RemoveTableTitleRow:1,addTableCaption:1,RemoveTableCaption:1,Insert:{RowInsertBefore:1,RowInsertAfter:1,
ColumnInsertBefore:1,ColumnInsertAfter:1,Append5Row:1,Append5Column:1},Remove:{RemoveRow:1,RemoveColumn:1,EmptyTable:1,RemoveTable:1},MergeCell:{ColumnMergeAfter:1,RowMergeAfter:1,CancelCellMerge:1},"-a":1,SetTableWidth:{TableWidthDefault:1,TableWidthAuto:1,TableWidthFixed:1,TableWidthAverage:1},SetColumnWidth:{SetColumnWidthAdd10:1,SetColumnWidthReduce10:1,SetColumnWidthAdd50:1,SetColumnWidthReduce50:1},SetColumnAlign:{SetColumnAlignLeft:1,SetColumnAlignRight:1,SetColumnAlignCenter:1,SetColumnValignTop:1,
SetColumnValignCenter:1},SetRowAlign:{SetRowAlignLeft:1,SetRowAlignRight:1,SetRowAlignCenter:1,SetRowValignTop:1,SetRowValignCenter:1},SetCellAlign:{SetCellAlignLeft:1,SetCellAlignRight:1,SetCellAlignCenter:1,SetCellValignTop:1,SetCellValignCenter:1},TableMove:{RowMoveBefore:1,RowMoveAfter:1,RowMoveFirst:1,RowMoveLast:1}},(caption=a.caption)&&caption.innerHTML?delete c.addTableCaption:delete c.RemoveTableCaption,th.length?delete c.addTableTitleRow:delete c.RemoveTableTitleRow,d.rowSpan==1&&d.colSpan==
1)c.MergeCell.CancelCellMerge=0}else{c.Image=1;c.InsertTable=2;if(a.size())c.Link=1;c.Source=1}return c}});b.plugin("RemoveTable",{isNeedPanel:0,click:function(){var a=d.getElement().table;b.$(a).remove();return!0}});b.plugin("RemoveRow",{isNeedPanel:0,click:function(){var a=d.getElement().row;b.$(a).remove();return!0}});var c={removeColumn:function(){var a,c;a=d.getElement();c=a.table;a=a.cell.cellIndex;for(var b=0,e=c.rows.length;b<e;b++)c.rows[b].deleteCell(a)},insertRow:function(a,c,d){var e,
d=d||0;a&&c&&(e=b.$(c).clone(),e.children().html("&nbsp;").attr("rowSpan",1),a=a.insertRow(c.rowIndex+d),b.$(a).html(e.html()))},moveRow:function(a,c,d){d=d||"after";a&&c&&(d==="before"?(a=b.$(c).prev(),a.size()&&a.before(c)):d==="after"?(a=b.$(c).next(),a.size()&&a.after(c)):d==="first"?b.$(a).prepend(c):d==="last"&&b.$(a).append(c))},addTitleRow:function(a){var c="";a&&(c=b.$(a.rows[0]).clone(),c.children().html("&nbsp;").attr("rowSpan",1),c=c.html().replace(/td/ig,"th"),a=a.insertRow(0),b.$(a).html(c))},
insertColumn:function(a,c,d){for(var e,g,c=c.cellIndex,d=c+d,h=0,i=a.rows.length;h<i;h++)e=a.rows[h],d<=e.cells.length&&(g=b.$(e.cells[c]).clone(),g.html("&nbsp;"),e=e.insertCell(d),b.$(e).replaceWith(g[0]))},setCell:function(){d.getElement()},setTable:function(){},setCaption:function(){var a;a=d.getElement().table;a.caption?a.deleteCaption():a.createCaption().innerHTML="\u8868\u683c\u540d\u79f0"},mergeColumn:function(){var a,c,b,e;a=d.getElement();c=a.cell;a=a.row;e=c.colSpan;b=c.cellIndex;if(b<
a.cells.length-1&&(b=a.cells[b+1])&&c.rowSpan==b.rowSpan)c.colSpan=e+b.colSpan,c.innerHTML+=b.innerHTML,a.removeChild(b)},mergeRow:function(){var a,c,b,e,g,h;a=d.getElement();e=a.table;c=a.cell;h=a.row;b=c.cellIndex;g=h.rowIndex;a=c.rowSpan;if(g<e.rows.length-1&&(g=e.rows[g+a],(b=g.cells[b])&&c.colSpan==b.colSpan)){if(h.cells.length>1)c.rowSpan=a+b.rowSpan;c.innerHTML+=b.innerHTML;g.removeChild(b);g.cells.length||e.deleteRow(g.rowIndex)}},unMerge:function(a,c,b){var d=b.cellIndex,e=c.rowIndex;if(b.rowSpan>
1){c=b.rowSpan;b.rowSpan=1;for(var g=0;g<c-1;g++)b=a.rows[e+g+1].insertCell(d),b.innerHTML="&nbsp;"}else if(b.colSpan>1){a=b.colSpan;b.colSpan=1;for(g=0;g<a-1;g++)b=c.insertCell(d+1),b.innerHTML="&nbsp;"}},setColumnWidth:function(a,c,d){for(var d=b.$(c).width()+d,e=c.cellIndex,g=0,h=a.rows.length;g<h;g++)if((c=a.rows[g].cells[e])&&c.colSpan==1)c.width=d},SetCellAlign:function(a,c,b){if(a){if(c)a.align=c;if(b)a.vAlign=b}},SetColumnAlign:function(a,c,b,d){for(var e=c.cellIndex,g=0,i=a.rows.length;g<
i;g++)if(c=a.rows[g].cells[e]){if(b)c.align=b;if(d)c.vAlign=d}},SetRowAlign:function(a,c,b){for(var d=0,e=a.cells.length;d<e;d++)if(cell=a.cells[d]){if(c)cell.align=c;if(b)cell.vAlign=b}}};b.plugin("RemoveColumn",{click:function(a){c.removeColumn(a);return!0}});b.plugin("RowInsertBefore",{click:function(){var a=d.getElement();c.insertRow(a.table,a.row,0);return!0}});b.plugin("RowInsertAfter",{click:function(){var a=d.getElement();c.insertRow(a.table,a.row,a.cell.rowSpan);return!0}});b.plugin("Append5Row",
{click:function(){for(var a=d.getElement(),b=a.table.rows,b=b[b.length-1],e=0;e<5;e++)c.insertRow(a.table,b,1);return!0}});b.plugin("ColumnInsertBefore",{click:function(){eles=d.getElement();table=eles.table;cell=eles.cell;c.insertColumn(table,cell,0);return!0}});b.plugin("ColumnInsertAfter",{click:function(){eles=d.getElement();table=eles.table;cell=eles.cell;c.insertColumn(table,cell,cell.colSpan);return!0}});b.plugin("Append5Column",{click:function(){var a=d.getElement(),c=a.table.rows,a=a.cell.width;
ths=b.$("<th></th><th></th><th></th><th></th><th></th>");tds=b.$("<td></td><td></td><td></td><td></td><td></td>");ths.html("&nbsp;");tds.html("&nbsp;");a&&(ths.width(a),tds.width(a));for(var a=0,e=c.length;a<e;a++)g.nodeName(c[a].cells[0],"th")?ths.clone().appendTo(c[a]):tds.clone().appendTo(c[a]);return!0}});b.plugin("ColumnMergeAfter",{click:function(a){c.mergeColumn(a,1);return!0}});b.plugin("RowMergeAfter",{click:function(a){c.mergeRow(a,1);return!0}});b.plugin("CancelCellMerge",{click:function(){var a=
d.getElement();c.unMerge(a.table,a.row,a.cell);return!0}});b.plugin("addTableCaption",{click:function(a){c.setCaption(a);return!0}});b.plugin("RemoveTableCaption",{click:function(a){c.setCaption(a);return!0}});b.plugin("addTableTitleRow",{click:function(){var a=d.getElement();a.table&&c.addTitleRow(a.table);return!0}});b.plugin("RemoveTableTitleRow",{click:function(){var a=d.getElement();a.table&&a.table.deleteRow(0);return!0}});b.plugin("EmptyTable",{click:function(){var a=d.getElement(),c;if(a.table)for(var a=
a.table,b=0,e=a.rows.length;b<e;b++){c=a.rows[b];for(var g=0,h=c.cells.length;g<h;g++)c.cells[g].innerHTML="<br />"}return!0}});b.plugin("TableWidthDefault",{click:function(){var a=d.getElement().table,c;a.removeAttribute("width");for(var b=0,e=a.rows.length;b<e;b++){c=a.rows[b];for(var g=0,h=c.cells.length;g<h;g++)c.cells[g].removeAttribute("width")}return!0}});b.plugin("TableWidthAuto",{click:function(){var a=d.getElement().table,c;a.width="99%";for(var b=0,e=a.rows.length;b<e;b++){c=a.rows[b];
for(var g=0,h=c.cells.length;g<h;g++)c.cells[g].removeAttribute("width")}return!0}});b.plugin("TableWidthFixed",{click:function(){var a=d.getElement().table,c,e;width=b.$(a).width();a.removeAttribute("width");for(var g=0,i=a.rows.length;g<i;g++){c=a.rows[g];for(var h=0,m=c.cells.length;h<m;h++)e=c.cells[h],e.width=b.$(e).outerWidth()}return!0}});b.plugin("TableWidthAverage",{click:function(){var a=d.getElement().table,c,e,g;c=a.rows[0].cells;for(var i=e=0,h=c.length;i<h;i++)e+=c[i].colSpan;g=a.width?
a.width/e:b.$(a).width()/e;g=Math.round(g)-10;a.removeAttribute("width");i=0;for(h=a.rows.length;i<h;i++){c=a.rows[i];for(var m=0,o=c.cells.length;m<o;m++)if(e=c.cells[m],e.colSpan==1)e.width=g}return!0}});b.plugin("SetColumnWidthAdd10",{click:function(){var a=d.getElement();c.setColumnWidth(a.table,a.cell,10);return!0}});b.plugin("SetColumnWidthReduce10",{click:function(){var a=d.getElement();c.setColumnWidth(a.table,a.cell,-10);return!0}});b.plugin("SetColumnWidthAdd50",{click:function(){var a=
d.getElement();c.setColumnWidth(a.table,a.cell,50);return!0}});b.plugin("SetColumnWidthReduce50",{click:function(){var a=d.getElement();c.setColumnWidth(a.table,a.cell,-50);return!0}});b.plugin("SetColumnAlignLeft",{click:function(){var a=d.getElement();c.SetColumnAlign(a.table,a.cell,"left","");return!0}});b.plugin("SetColumnAlignRight",{click:function(){var a=d.getElement();c.SetColumnAlign(a.table,a.cell,"right","");return!0}});b.plugin("SetColumnAlignCenter",{click:function(){var a=d.getElement();
c.SetColumnAlign(a.table,a.cell,"center","");return!0}});b.plugin("SetColumnValignTop",{click:function(){var a=d.getElement();c.SetColumnAlign(a.table,a.cell,"","top");return!0}});b.plugin("SetColumnValignCenter",{click:function(){var a=d.getElement();c.SetColumnAlign(a.table,a.cell,"","center");return!0}});b.plugin("SetRowAlignLeft",{click:function(){var a=d.getElement();c.SetRowAlign(a.row,"left","");return!0}});b.plugin("SetRowAlignRight",{click:function(){var a=d.getElement();c.SetRowAlign(a.row,
"right","");return!0}});b.plugin("SetRowAlignCenter",{click:function(){var a=d.getElement();c.SetRowAlign(a.row,"center","");return!0}});b.plugin("SetRowValignTop",{click:function(){var a=d.getElement();c.SetRowAlign(a.row,"","top");return!0}});b.plugin("SetRowValignCenter",{click:function(){var a=d.getElement();c.SetRowAlign(a.row,"","center");return!0}});b.plugin("SetCellAlignLeft",{click:function(){var a=d.getElement();c.SetCellAlign(a.cell,"left","");return!0}});b.plugin("SetCellAlignRight",{click:function(){var a=
d.getElement();c.SetCellAlign(a.cell,"right","");return!0}});b.plugin("SetCellAlignCenter",{click:function(){var a=d.getElement();c.SetCellAlign(a.cell,"center","");return!0}});b.plugin("SetCellValignTop",{click:function(){var a=d.getElement();c.SetCellAlign(a.cell,"","top");return!0}});b.plugin("SetCellValignCenter",{click:function(){var a=d.getElement();c.SetCellAlign(a.cell,"","center");return!0}});b.plugin("RowMoveBefore",{click:function(){var a=d.getElement();c.moveRow(a.table,a.row,"before");
return!0}});b.plugin("RowMoveAfter",{click:function(){var a=d.getElement();c.moveRow(a.table,a.row,"after");return!0}});b.plugin("RowMoveFirst",{click:function(){var a=d.getElement();c.moveRow(a.table,a.row,"first");return!0}});b.plugin("RowMoveLast",{click:function(){var a=d.getElement();c.moveRow(a.table,a.row,"last");return!0}});b.plugin("TableProps",{config:{position:"center",width:400},init:function(a){a.cache.html='<table width="100%" border="0" class="jqe-plugin-tableprops">\t\t\t<tbody><tr><td colspan="4" class="jqe-plugin-tableprops-title">\t\t\t\u8868\u683c<span class="jqe-panel-notice">(\u8bbe\u7f6e\u8868\u683c\u5c5e\u6027)</td></tr>\t\t\t<tr><td>\u884c\u6570:<br/><input type="text" name="talbeRows" maxlength="3"/></td>\t\t\t\t<td>\u8868\u683c\u5bbd\u5ea6:<br/><input type="text" name="talbeWidth" maxlength="5"/></td>\t\t\t\t<td>\u8868\u683c\u5bf9\u9f50:<br/><select name="tableAlign"><option value="left">\u5de6\u5bf9\u9f50</option>\t\t\t\t<option value="center">\u5c45\u4e2d</option>\t\t\t\t<option value="right">\u53f3\u5bf9\u9f50</option></select></td></tr>\t\t\t<tr><td>\u5217\u6570:<br/><input type="text" name="talbeCols" maxlength="3"/></td>\t\t\t<td>\u8868\u683c\u9ad8\u5ea6:<br/><input type="text" name="talbeHeight" maxlength="5"/></td>\t\t\t<td>\u8868\u683c\u8fb9\u6846:<br/><input type="text" name="talbeBorder" maxlength="2"/></td></tr>\t\t\t<tr><td colspan="4" class="jqe-plugin-tableprops-title">\t\t\t\u884c<span class="jqe-panel-notice">(\u8bbe\u7f6e\u6574\u884c\u5355\u5143\u683c\u7684\u5c5e\u6027)</span></td></tr>\t\t\t<tr><td>\u5355\u5143\u683c\u80cc\u666f:<br/><input type="text" name="rowBg" maxlength="16"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bbd\u5ea6:<br/><input type="text" name="rowWidth" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u9ad8\u5ea6:<br/><input type="text" name="rowHeight" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bf9\u9f50:<br/><select name="tableAlign"><option value="left">\u5de6\u5bf9\u9f50</option>\t\t\t\t<option value="center">\u5c45\u4e2d</option>\t\t\t\t<option value="right">\u53f3\u5bf9\u9f50</option></select></td></tr>\t\t\t<tr><td colspan="4" class="jqe-plugin-tableprops-title">\t\t\t\u5217<span class="jqe-panel-notice">(\u8bbe\u7f6e\u6574\u5217\u5355\u5143\u683c\u7684\u5c5e\u6027)</span></td></tr>\t\t\t<tr><td>\u5355\u5143\u683c\u80cc\u666f:<br/><input type="text" name="columnBg" maxlength="16"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bbd\u5ea6:<br/><input type="text" name="columnWeidth" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u9ad8\u5ea6:<br/><input type="text" name="columnHeight" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bf9\u9f50:<br/><select name="tableAlign"><option value="left">\u5de6\u5bf9\u9f50</option>\t\t\t\t<option value="center">\u5c45\u4e2d</option>\t\t\t\t<option value="right">\u53f3\u5bf9\u9f50</option></select></td></tr>\t\t\t<tr><td colspan="4" class="jqe-plugin-tableprops-title">\t\t\t\u5355\u5143\u683c<span class="jqe-panel-notice">(\u4ec5\u8bbe\u7f6e\u5f53\u524d\u4e00\u4e2a\u5355\u5143\u683c\u7684\u5c5e\u6027)</span></td></tr>\t\t\t<tr><td>\u5355\u5143\u683c\u80cc\u666f:<br/><input type="text" name="cellBg" maxlength="16"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bbd\u5ea6:<br/><input type="text" name="cellWidth" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u9ad8\u5ea6:<br/><input type="text" name="cellHeight" maxlength="3"/></td>\t\t\t<td>\u5355\u5143\u683c\u5bf9\u9f50:<br/><select name="tableAlign"><option value="left">\u5de6\u5bf9\u9f50</option>\t\t\t\t<option value="center">\u5c45\u4e2d</option>\t\t\t\t<option value="right">\u53f3\u5bf9\u9f50</option></select></td></tr>\t\t\t</tbody></table>'},
callback:function(){},ok:function(){c.setTable(i);return 0}})})(jQEditor,jQuery);
(function(b){var g=b.consts,e="";b.plugin("Source",{icon:{width:50,text:"\u6e90\u4ee3\u7801","default":{Source:{XY:"none"}}},config:{width:800,position:"center",overlay:!0},init:function(b){b.cache.html='<textarea name="content" style="width:99%;height:420px"></textarea>'},callback:function(g){var d=b.getHTML(),d=d.replace(/<p([^>]*)>/ig,"\n<p$1>\n").replace(/<\/p>/ig,"\n</p>\n").replace(/<br \/>/ig,"<br />\n").replace(/\s\n<\/p>/ig,"\n</p>").replace(/<p([^>]*)>\n+/ig,"<p$1>\n").replace(/<p(?:[^>]*)>\s*<\/p>/ig,
"").replace(/\n{2,}/ig,"\n");e=(e=$.trim(d))||"<p>\n\n</p>";g.find("textarea[name=content]").val(e)},ok:function(i,d){var c=b.mod("Utils"),a=i.find("textarea[name=content]").val(),f=0,a=$.trim(a);a===e?f=1:(a===""?a=g.IE?"<p>&nbsp;</p>":"<p><br></p>":/<\w+/i.test(a)||(a="<p>"+a+"</p>"),(c=c.checkTag(a))?d.error(c):(b.setHTML(a),f=1));return f}})})(jQEditor);
(function(b){b.plugin("PasteText",{config:{width:600,position:"center",overlay:!0},depends:["Panel","Selection"],init:function(b){b.cache.html='<textarea name="content" style="width:99%;height:260px"></textarea>'},get:function(g){var e=b.mod("Utils"),g=g.find("textarea[name=content]").val();return e.escape(g)}})})(jQEditor);
(function(b){var g=null;b.plugin("PasteWord",{defaultHtml:"<p>&nbsp;</p>",config:{width:600,position:"center",overlay:!0},init:function(b){b.cache.html='<div class="jqe-plugin-pasteword"></div>'},one:function(e,i){var d=e.find(".jqe-plugin-pasteword"),c={id:"PasteWord",contentEditable:!0,iframeStyle:{width:"99%",height:"99%",margin:"0 5px"},contentCssName:b.get("option").contentCssName};i.notice("\u8bf7\u5c06Word\u5f53\u4e2d\u7684\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\uff0c\u7136\u540e\u70b9\u51fb\u786e\u5b9a\u6309\u94ae\u3002");
d=b.iframe(c,d,i.defaultHtml);g=d.dom;d.win.focus()},callback:function(b,i){g.body.innerHTML=i.defaultHtml},get:function(b,i){var d="",c="";if(g)c=g.body.innerHTML,d=i.cleanWord(c),/^<p>&nbsp;<\/p>$/i.test(d)&&(d="");return d},cleanWord:function(b){if(b.match(/mso(-|normal)|WordDocument|<table\s+[^>]*?x:str/i))for(var b=b.replace(/<\!--[\s\S]*?--\>|<!(--)?\[[\s\S]+?\](--)?>|<style(\s+[^>]*?)?>[\s\S]*?<\/style>/ig,""),b=b.replace(/\r?\n/ig,""),b=b.replace(/(<(\/?)([\w-:]+))((?:\s+[\w-:]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^>\s]+))?)*)\s*(\/?>)/g,
function(b,c,a,f,e,g){f=f.toLowerCase();if(f.match(/^(link|img)$/)&&e.match(/file:\/\//i)||f.match(/:/)||f==="span")return"";a||(e=e.replace(/\s([\w-:]+)(?:\s*=\s*("[^"]*"|'[^']*'|[^>\s]+))?/ig,function(a,c,b){c=c.toLowerCase();b.match(/^(["']?)(.*)\1/);if(c.match(/:/))return"";else if(c.match(/^(class|lang|language|span)$/))return"";else if(f==="td"&&(c==="height"||c==="width"&&!e.match(/\scolspan="\d+"/i)))return"";else if(c==="style")return"";return a}));return c+e+g}),g=0;g<3;g++)b=b.replace(/<([^\s>]+)(\s+[^>]*)?>\s*<\/\1>/g,
function(b,c){return c.match(/^a$/i)?b:""});return b}})})(jQEditor);(function(b){b.plugin("Help",{config:{position:"center",overlay:!0,width:400,height:220},init:function(b){var e=[];e.push('<div class="jqe-panel-tabs">');e.push('<a class="jqe-panel-tabs-selected jqe-panel-tabs-first">\u4f7f\u7528\u5e2e\u52a9</a><a>\u5feb\u6377\u952e</a>');e.push("</div>");e.push('<div class=""></div>');e.push('<div class=""></div>');b.cache.html=e.join("")}})})(jQEditor);
(function(b){var g=b.mod("Event"),e=b.mod("History");b.plugin("Redo,Undo",{click:function(g,d){var c=d.name;if(e)e[c]();else b.execCommand(c);return 1}});g.bind("oncreate",function(){var e=b.plugin("Undo"),d=b.plugin("Redo");e.disable();d.disable()})})(jQEditor);
(function(b){b=b.mod("Menu");b.add("mouseup",{title:"\u5de6\u952e\u83dc\u53551",check:function(){return!1},getHtml:function(){var b=[];b.push('<div class="jqe-menu-text">');b.push("\u6587\u672c\u5904\u7406\u83dc\u5355");b.push("</div>");return b.join("")}});b.add("click",{title:"\u5de6\u952e\u83dc\u53552",check:function(){return 0},getHtml:function(){return{a:"\u83dc\u53551",b:"\u83dc\u53552",c:"\u83dc\u53553"}}});b.add("contextmenu",{title:"\u4e00\u4e2a\u53f3\u952e\u83dc\u5355\uff0c\u6709\u9009\u4e2d\u5185\u5bb9\u65f6\u89e6\u53d1",
check:function(){return!1},getHtml:function(){var b={};return b={H1:1,H2:1,Link:1,BaikeLink:1,Format:{Bold:1,Italic:1,Underline:1,StrikeThrough:1,SubScript:1,SuperScript:1},"-a":1,BaikeSearch:1,Search:{BaiduSearch:1,GoogleSearch:1}}}})})(jQEditor,jQuery);
(function(b){function g(d){b.setEid(d.id);var c=b.get("document");b.get("iframe");var a=b.plugin("Resize"),f=0,e=c.createElement("DIV");e.style.clear="both";e.style.display="block";c.body.appendChild(e);f=Math.max(e.offsetTop+20,d.height);c.body.removeChild(e);a.setHeight(f,d.autoHeight||100)}var e=b.consts,i=b.mod("Event");b.plugin("Resize",{autoHeight:function(){var d=b.get("option");d.autoHeight&&g(d)},setHeight:function(d,c){var a=$("#"+b.eid).find("div.jqe-content"),c=typeof c==="number"?c:1;
if(e.IE6)a.height(d),a.children("iframe").height(d);else return a.height(d),!1;b.log("run","autoHeight = "+d+", speed="+c)}});i.bind("oncreate",function(){var d=b.get("option");d.autoHeight&&(setTimeout(function(c){return function(){g(c)}}(d),250),setTimeout(function(c){return function(){g(c)}}(d),500))});i.bind("load",function(){var d=b.get("option");d.autoHeight&&g(d)});i.bind("onmonitor",function(){var d=b.get("option");d.autoHeight&&g(d)})})(jQEditor);
(function(b){var g=b.consts,e=b.mod("Event"),i=!1;b.plugin("FixedToolbar",{});e.bind("onscroll",function(){var d=$(document).scrollTop(),c=b.mod("Toolbar").getCurrent(),a=b.get("option"),f=$("#"+b.eid+" .jqe-content"),f=f.height()+f.offset().top;if(!c||!a.autoHeight)b.log("run","\u6ca1\u6709\u627e\u5230\u5de5\u5177\u680f\u6216\u672a\u8bbe\u7f6e\u6d6e\u52a8");else{if(g.IE6&&!d)d=document.documentElement.scrollTop;if(a.toolbarTop&&(d<a.toolbarTop||d>f))c.removeClass(a.fixedClassName),g.IE6&&c.css("top",
0),b.log("run","\u5de5\u5177\u680f\u53d6\u6d88\u6d6e\u52a8"),i=!1;else{i||(c.addClass(a.fixedClassName),b.log("run","\u5de5\u5177\u680f\u5f00\u59cb\u6d6e\u52a8"));if(g.IE6){for(var a=c.parents(),f=null,e=0;e<a.length;e++)if(f=a.eq(e),f.css("position")=="relative"){d-=f.offset().top;break}c.css("top",d)}i=!0}}})})(jQEditor);
(function(b){b.mod("Event");var g=b.mod("Utils"),e=b.mod("Message");b.plugin("BaikeLink",{linkName:"baikelink",click:function(){var b="";(b=this.getSelectionText())?g.strlen(b)>40?e.showError("\u767e\u79d1\u94fe\u63a5\uff0c\u4e0d\u80fd\u9009\u62e9\u8d85\u8fc740\u4e2a\u5b57\u7b26\u7684\u957f\u5ea6\uff01"):/[`~!\\\/]/.test(b)?e.showError("\u767e\u79d1\u94fe\u63a5\uff0c\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u201c`~!/\u201d\uff01"):(b='<a href="http://www.baike.com/wiki/'+encodeURIComponent(b)+
'" class="'+this.linkName+'" title="'+b+'" target="_blank">'+b+"</a>",this.pasteHTML(b)):e.showError("\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u4e3a\u767e\u79d1\u94fe\u63a5\u7684\u6587\u5b57\uff01");return 1}})})(jQEditor);
(function(b){var g,e;function i(c,i){var l="",l=i.getSelectionText(),k=i.getCursorElement();b.get("document");var h=$.nodeName(k,"div"),m=$(k);h&&$(k).attr("class")==c?(k=$(k),l=$.trim(k.text())?k.html():"",k.replaceWith(l)):h&&(m.attr("class")==g||m.attr("class")==e)?m.attr("class",c):(k=!1,!l||$.trim(l).length<1?k="\u4e0d\u80fd\u8bbe\u7f6e\u7a7a\u6807\u9898\u3002":d.strlen(l)>40&&(k="\u6807\u9898\u6700\u591a40\u4e2a\u5b57\u7b26\uff0c\u4e00\u4e2a\u6c49\u5b57\u7b972\u4e2a\u5b57\u7b26\u3002"),k?(b.showError(k),
k=!1):k=!0,k&&(l=a.replace(/\[class\]/g,c).replace(/\[text\]/g,l),i.pasteHTML(l)));return 1}var d=b.mod("Utils"),c=b.mod("Menu");b.mod("Selection");g="hdwiki_tmml";e="hdwiki_tmmll";var a='<div class="[class]">[text]</div>';c.add("mouseup",{title:"\u76ee\u5f55\u5feb\u6377\u83dc\u5355",check:function(a){var c=!1,b;if(a&&typeof a==="object"&&(b=$(a),$.nodeName(a,"div")&&b.size()&&(g==b.attr("class")||e==b.attr("class"))))c=!0;return c},getHtml:function(){return{className:"jqe-shortcut-menu",html:'<a name="ShortcutMenu" method="totext">\u53d6\u6d88\u76ee\u5f55</a> <a name="ShortcutMenu" method="remove">\u5220\u9664\u76ee\u5f55</a>'}}});
b.plugin("H1",{inserthtml:"custom",icon:{width:60,text:"\u4e00\u7ea7\u76ee\u5f55","default":{H1:{XY:"none"}}},click:function(){return i(g,this)}});b.plugin("H2",{inserthtml:"custom",icon:{width:60,text:"\u4e8c\u7ea7\u76ee\u5f55","default":{H2:{XY:"none"}}},click:function(){return i(e,this)}})})(jQEditor);
(function(b,g){var e=b.mod("Menu"),i=b.mod("Event");e.add("mouseup",{title:"\u94fe\u63a5\u5feb\u6377\u83dc\u5355",check:function(c){var a=!1;c&&typeof c==="object"&&g.nodeName(c,"A")&&(a=!0);return a},getHtml:function(c){var a=[],c=g(c),b=c.text(),d=c.attr("href");a.push('<a name="ShortcutMenu" method="unlink" title="\u5c06\u94fe\u63a5\u8f6c\u4e3a\u7eaf\u6587\u672c">\u53d6\u6d88\u94fe\u63a5(Esc)</a>');d&&(c=/^http:\/\/www\.hudong\.com\/wiki\//.test(d)||c.hasClass("baikelink")||c.hasClass("innerlink")?
"http://www.baike.com/wiki/"+encodeURI(b):d,a.push('<a href="'+c+'" title="'+c+'" target="_blank" name="ShortcutMenu" method="openlink">\u6253\u5f00\u94fe\u63a5</a>'));return{className:"jqe-shortcut-menu",html:a.join(" ")}}});e.add("mouseup",{title:"\u76ee\u5f55\u5feb\u6377\u83dc\u5355",check:function(c){var a=!1;if(c&&typeof c==="object"&&(g.nodeName(c,"H2")||g.nodeName(c,"H3")))a=!0;return a},getHtml:function(){var c=[];c.push('<a name="ShortcutMenu" method="totext">\u53d6\u6d88\u76ee\u5f55(Esc)</a> <a name="ShortcutMenu" method="remove">\u5220\u9664\u76ee\u5f55</a>');
return{className:"jqe-shortcut-menu",html:c.join("")}}});b.plugin("ShortcutMenu",{isNeedPanel:0,click:function(c,a,b){var c=!1,d=i.getTarget(),e=b.attr("method");a[e]?c=a[e](d,b):alert("\u63d0\u793a\uff1a\u5feb\u6377\u83dc\u5355\u65b9\u6cd5\u540d\u79f0\u9519\u8bef\uff01");return c},totext:function(c){var a=g(c).text(),d=b.get("document");g(c,d).replaceWith(a);return!0},unlink:function(c){var a=g(c).html(),d=b.get("document");g(c,d).replaceWith(a);return!0},remove:function(c){c.parentNode.removeChild(c);
return!0},table:function(c,a){var d=a.attr("plugin");b.plugin(d).click();return d.indexOf("Insert")>-1?!1:!0},openlink:function(){return!0},removeRefer:function(c){c.parentNode.removeChild(c);return!0},editRefer:function(c,a){var d=b.plugin(a.attr("plugin"));d.editor_callback(c.getAttribute("name"),d);return!0}});e.add("mouseup",{title:"\u56fe\u7247\u5feb\u6377\u83dc\u5355",check:function(c){var a=!1;c&&typeof c==="object"&&g.nodeName(c,"IMG")&&(a=!0);return a},getHtml:function(c){var a=[],c=/a\d\.att\.hudong\.com/i.test(c.src);
a.push("<span>\u5c3a\u5bf8\uff1a");c?(a.push('<a name="ShortcutMenu-Image" method="resize" param="_950">\u5927</a>'),a.push('<a name="ShortcutMenu-Image" method="resize" param="_s">\u4e2d</a>'),a.push('<a name="ShortcutMenu-Image" method="resize" param="_140">\u5c0f</a>')):a.push("\u5927 \u4e2d \u5c0f ");a.push("</span>");a.push("<span>\u4f4d\u7f6e\uff1a");a.push('<a name="ShortcutMenu-Image" method="align" param="left">\u5c45\u5de6</a>');location.hostname!="www.baike.com"&&a.push('<a name="ShortcutMenu-Image" method="align" param="center">\u5c45\u4e2d</a>');
a.push('<a name="ShortcutMenu-Image" method="align" param="right">\u5c45\u53f3</a>');a.push("</span>");a.push("<br />");a.push('<span><a name="ShortcutMenu-Image" method="desc">\u6dfb\u52a0\u63cf\u8ff0</a></span>|');a.push('<span><a name="ShortcutMenu-Image" method="remove">\u5220\u9664</a></span>');return{className:"jqe-shortcut-menu",html:a.join("")}},callback:function(c){var a=i.getTarget(),b=g(a).closest("div.img"),d=null,e={left:"img_l",center:"img_c",right:"img_r"},k=["_950","_s","_140"],h=
{color:"#333333",cursor:"default","text-decoration":"none"};if(b.length&&b.attr("class").indexOf("img")>-1){var m=b.attr("class"),o;for(o in e){var n=e[o];if(m.indexOf(n)>-1){d=o;break}}d&&c.find("[param="+d+"]").css(h).removeAttr("method").removeAttr("name");n=b.find("strong");n.length>0&&(n=c.find("[method=desc]"),n.css(h).removeAttr("method").removeAttr("name"))}if(/a\d\.att\.hudong\.com/i.test(a.src)){a=a.src;for(b=0;b<k.length;b++)if(n=k[b],a.indexOf(n)>-1){c.find("[param="+n+"]").css(h).removeAttr("method").removeAttr("name");
break}}}});e.add("mouseup",{title:"\u8868\u683c\u5feb\u6377\u83dc\u5355",timeout:3E3,check:function(c,a){var d=!1;if(a.button===2)return d;c&&typeof c==="object"&&b.$(c).closest("tr").size()&&(d=!0);return d},getHtml:function(){var c=[];c.push('<span>\u5220\u9664:<a name="ShortcutMenu" method="table" plugin="RemoveTable" title="\u5220\u9664\u6574\u4e2a\u8868\u683c">\u8868\u683c</a><a name="ShortcutMenu" method="table" plugin="RemoveRow" title="\u5220\u9664\u4e00\u884c">\u884c</a><a name="ShortcutMenu" method="table" plugin="RemoveColumn" title="\u5220\u9664\u4e00\u5217">\u5217</a></span>');
c.push('<span>\u79fb\u52a8:<a name="ShortcutMenu" method="table" plugin="RowMoveBefore" title="\u5411\u4e0a\u79fb\u52a8\u4e00\u884c">\u4e0a</a><a name="ShortcutMenu" method="table" plugin="RowMoveAfter" title="\u5411\u4e0b\u79fb\u52a8\u4e00\u884c">\u4e0b</a></span>');c.push('<span>\u63d2\u5165:<a name="ShortcutMenu" method="table" plugin="RowInsertBefore" title="\u5411\u4e0a\u63d2\u5165\u4e00\u884c">\u4e0a</a><a name="ShortcutMenu" method="table" plugin="RowInsertAfter" title="\u5411\u4e0b\u63d2\u5165\u4e00\u884c">\u4e0b</a><a name="ShortcutMenu" method="table" plugin="ColumnInsertBefore" title="\u5411\u5de6\u63d2\u5165\u4e00\u5217">\u5de6</a><a name="ShortcutMenu" method="table" plugin="ColumnInsertAfter" title="\u5411\u53f3\u63d2\u5165\u4e00\u5217">\u53f3</a></span>');
return{className:"jqe-shortcut-menu",html:c.join("")}}});b.plugin("ShortcutMenu-Image",{style:".ShortcutMenu-Image-selected{color:#333333;cursor:default;font-weight:bold;text-decoration:none;}",click:function(c,a,b){var c=i.getTarget(),d=b.attr("method"),e=b.attr("param"),g=!1;d&&(a[d]?g=a[d](c,e,b):alert("\u63d0\u793a\uff1a\u5feb\u6377\u83dc\u5355\u65b9\u6cd5\u540d\u79f0\u9519\u8bef\uff01"));return g},resize:function(c,a){d.update_img(c,a,"resize");return!0},align:function(c,a){d.update_img(c,a,
"align");return!0},desc:function(c){var a=g(c).closest("div.img"),b="";a.length&&(b=a.attr("class"),b.indexOf("img_l")>-1?b="left":b.indexOf("img_c")>-1?b="center":b.indexOf("img_r")>-1&&(b="right"));d.update_img(c,b,"desc");return!0},remove:function(c){c=g(c);c.closest("div.img").length?c=c.closest("div.img"):c.closest("a").length&&(c=c.closest("a"));c.remove();return!0}});var d={update_img:function(c,a,d){function e(c){k.attr("src");var g=m[a]?m[a]:"img_c";typeof c=="number"&&(h=c);if(h>i)h=i,k.width=
h;k.closest("a").length&&(k=k.closest("a"));c=k.closest("div.img");c.length?d=="resize"?c.width(h).find("img").width(h):c.removeClass("img_l img_c img_r").addClass(g):(c=b.$('<div class="img '+g+'" style="width:'+h+'px"></div>').append(k.clone()),k.replaceWith(c));d=="desc"&&!c.find("strong").length&&(o=k.attr("title")?k.attr("title"):k.attr("alt")?k.attr("alt"):"\u56fe\u7247\u63cf\u8ff0",c.append("<strong>"+o+"</strong>"))}var i=600,k=g(c),h=k.width(),m={left:"img_l",center:"img_c",right:"img_r"},
o="",c="";if(d=="resize"&&/a\d\.att\.hudong\.com/i.test(k.attr("src"))){c=k.attr("src").replace(/_140|_s|_950/i,a);k.attr("src",c);var n=new Image;n.onload=function(){k.attr("width",n.width);e(n.width)};n.src=c}else e()}}})(jQEditor,jQuery);
(function(b){function g(a){for(var i=a.childNodes,k=0;k<i.length;k++){var h=i[k];if(1==h.nodeType){var m=h.tagName.toLowerCase();if(c[m]){for(var o=e.IE?f:d.clone(h.attributes),n=c[m],p="",q=0,s=o.length;q<s;q++)p=e.IE?o[q]:o[q].name.toLowerCase(),$.inArray(p,n)==-1&&(h.removeAttribute(p),b.log("run","\u6e05\u7406\u6807\u7b7e"+h.tagName+"\u7684\u5c5e\u6027"+p),h.getAttribute(p));if(p=e.IE?h.style.cssText:h.getAttribute("style")){for(var p=p.replace(/; /g,";").toLowerCase(),r=p.split(";"),q=0,s=r.length;q<
s;q++)o=r[q].split(":"),$.inArray("."+o[0],n)==-1&&(p=p.replace(RegExp(o[0]+":"+o[1]+";?","i"),""));(p=$.trim(p))?e.IE?h.style.cssText=p:h.setAttribute("style",p):h.removeAttribute("style")}m==="table"&&(m=$(h),n=m.attr("bordercolor"),m.hasClass("jqe-table")||m.addClass("jqe-table"),n||m.attr("bordercolor","#cccccc"),m.attr("border",1));h.hasChildNodes()&&g(h)}else{if(h.hasChildNodes())for(q=0;q<h.childNodes.length;q++)g(h.childNodes[q]),h.parentNode.insertBefore(h.childNodes[q].cloneNode(!0),h);
h.parentNode.removeChild(h)}}}return a.innerHTML}var e=b.consts,i=[],d=b.mod("Utils"),c,a={font:[],span:["class","style",".font-weight",".font-style",".text-decoration"],div:["class","style",".width",".text-align"],a:["class","href","target","title","alt"],img:"class,src,alt,title,align,usemap,border,/".split(","),hr:["/"],br:["/"],p:["align","style",".text-align"],table:"class,style,width,.width,align,border,bordercolor,cellpadding".split(","),tbody:[],tr:[],th:["class","align","colspan","rowspan"],
td:["class","align","colspan","rowspan"],ol:["class"],ul:["class"],li:["class"],sub:["class"],sup:["class","name"],blockquote:["style",".margin",".padding"],h2:[],h3:[],h4:[],h5:[],h6:[],em:[],strong:["style",".width"],b:[],i:[],u:[],strike:[],object:"classid,class,id,width,height,codebase".split(","),embed:"style,src,type,loop,autostart,quality,.width,.height,flename,width,height,volume,pluginspage,console,controls,/".split(","),param:["name","value"],map:["id","name"],area:["shape","coords","href",
"title","/"]},f="onclick,onmouseout,onmouseover,onmousemove,align,color,font,height,vspace,hspace,id,class,style,left,right,name,rel,size,title,width,valign,bgcolor,dir".split(",");b.plugin("Cleanup",{click:function(a){this.exec(a)},exec:function(d){var f=b.get("document"),e=b.mod("Message"),h=b.get("option");c=h.allowTags&&typeof h.allowTags==="object"?$.extend({},a,h.allowTags):a;e.showNotice("\u6b63\u5728\u8fdb\u884c\u6e90\u7801\u6e05\u7406\uff0c\u8bf7\u7a0d\u7b49......\u3000\u3000\u3000",2E4);
g(f.body);typeof d==="function"&&d();clearTimeout(i[b.eid]);i[b.eid]=setTimeout(function(){e.change("\u6b63\u5728\u8fdb\u884c\u6e90\u7801\u6e05\u7406\uff0c\u8bf7\u7a0d\u7b49......\u5b8c\u6210\uff01");clearTimeout(i[b.eid]);i[b.eid]=setTimeout(function(){e.hide()},500)},100);return!0}})})(jQEditor);
(function(b){var g={12:3,14:4,18:5,24:6,36:7};b.plugin("FontSize",{menuTitle:"\u66f4\u591a\u5b57\u53f7",style:".jqe-plugin-fontsize a{text-decoration:none;color:#333333;display:block;padding:2px;border:1px solid #eeeeee;background-color:#eeeeee;_float:left;_width:127px;padding-left:25px;}\n.jqe-plugin-fontsize a:hover{background-color:#ecf1f7;border:1px solid #aecff7;}\n.jqe-plugin-fontsize a.jqe-panel-a-hover{background-color:#ecf1f7;border:1px solid #aecff7;}\n#panel_FontSize .jqe-panel-body{padding:2px;}\n",isNeedTitle:0,
icon:{width:40,text:"\u5b57 \u53f7"},config:{width:160,HEIGHT:160},selectedSize:{},init:function(b){var i=[],d;for(d in g)lineHeight=d>22?d:22,i.push('<a href="jqe:FontSize('+d+')" style="font-size:'+d+"px;line-height:"+lineHeight+'px" size="'+g[d]+'">'+d+"px</a>");b.cache.html='<div class="jqe-plugin-fontsize">'+i.join("")+"</div>"},set:function(e,g){var d=g.selectedSize[b.eid];d||(d=4);g.setFontSize(d);g.hide();return 1},menu:function(b,g){b.set(g);return 1},action:function(e,g,d){var g=b.eid,c=
d.name,a=e.closest("[size]").attr("size"),e=e.text();a&&(b.log("run","FontSize="+a),d.selectedSize[g]=a,d.setFontSize(a),d.hide(),$("#"+g+"-"+c).find("span.jqe-icon").text(e));return!1},setFontSize:function(e){b.execCommand(this.name,!1,e)}})})(jQEditor);
(function(b){var g=[{name:"\u5b8b\u4f53",value:"SimSun"},{name:"\u4eff\u5b8b\u4f53",value:"FangSong_GB2312"},{name:"\u5fae\u8f6f\u96c5\u9ed1",value:"Microsoft YaHei"},{name:"\u9ed1\u4f53",value:"SimHei"},{name:"\u6977\u4f53",value:"KaiTi_GB2312"},"Courier New","Times New Roman","Impact","Georgia","Arial","Verdana","Tahoma"];b.plugin("FontName",{style:".jqe-plugin-fontname a{text-decoration:none;color:#333333;display:block;padding:2px 30px;border:1px solid #eeeeee;background-color:#eeeeee;_float:left;_width:120px;padding-left:25px;}.jqe-plugin-fontname a:hover{background-color:#ecf1f7;border:1px solid #aecff7;}#panel_FontName .jqe-panel-body{padding:2px;}",
isNeedTitle:0,icon:{width:40,text:"\u5b57 \u4f53"},config:{width:180,HEIGHT:340},selectedFont:{},init:function(b){for(var i=[],d,c,a,f=0,j=g.length;f<j;f++){d=typeof g[f];if(d==="string")c=g[f],a=g[f];else if(d==="object")c=g[f].value,a=g[f].name;i.push('<a href="jqe:FontName('+a+')" style="font-family: '+c+';line-height:22px" font="'+c+'">'+a+"</a>")}b.cache.html='<div class="jqe-plugin-fontname">'+i.join("")+"</div>"},set:function(e,g){g.setFontName(g.selectedFont[b.eid]||"SimSun");g.hide();return 1},
menu:function(b,g){b.set(g);return 1},action:function(e,g,d){var g=b.eid,c=d.name,a=e.closest("[font]").attr("font"),e=e.closest("[font]").text();a&&(d.selectedFont[g]=a,d.setFontName(a),d.hide(),$("#"+g+"-"+c).find("span.jqe-icon").text(e).css("font-family",a));return!1},setFontName:function(e){b.execCommand(this.name,!1,e)}})})(jQEditor);
(function(b){var g=b.mod("Menu");b.plugin("Bold",{menuType:"Menu",menuTitle:"\u66f4\u591a\u683c\u5f0f",menu:function(b,i){g.set(i.event,i.name);return 1}});g.add("Bold",{title:"\u6587\u672c\u683c\u5f0f\u4e0b\u62c9\u83dc\u5355",check:function(){return!0},getHtml:function(){return{Bold:1,Italic:1,Underline:1,SubScript:1,SuperScript:1}}})})(jQEditor,jQuery);
(function(b,g){b.plugin("Video",{config:{width:350,position:"center",overlay:!0},settings:{flash_mod:'<embed src="[url]" quality="high" width="[width]" height="[height]" align="middle" allowScriptAccess="always" allowFullScreen="true" mode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" wmode="transparent" ></embed>',url_max_len:500,url_name:"url_name",width_name:"width_name",height_name:"height_name",url_tips:"\u6587\u4ef6\u7f51\u7edc\u5730\u5740\uff1a",
tips:"\u652f\u6301.swf\u6587\u4ef6\u683c\u5f0f",size_tips:"\u6587\u4ef6\u663e\u793a\u5927\u5c0f\uff1a",width_tips:"\u5bbd\u5ea6",height_tips:"\u9ad8\u5ea6",default_url:"http://",default_width:480,default_height:400,max_wid_len:3,max_hei_len:3},init:function(){var b=this.settings;g.extend(!0,b,this._settings);this.cache.html='<table border="0" width="100%">\t\t\t<tr><td colspan="2"><strong>'+b.url_tips+'</strong></td></tr>\t\t\t<tr><td colspan="2"><input type="text" name="'+b.url_name+'" maxlength="'+
b.url_max_len+'" value="'+b.default_url+'" style="width:280px;"></td></tr>\t\t\t<tr><td colspan="2" style="color:#999999;">'+b.tips+'</td></tr>\t\t\t<tr><td colspan="2"><strong>'+b.size_tips+'</strong></td></tr>\t\t\t<tr class="input_tr"><td>'+b.width_tips+' <input type="text" name="'+b.width_name+'" value="'+b.default_width+'" maxlength="'+b.max_wid_len+'" style="width:80px;"></td>\t\t\t<td>'+b.height_tips+' <input type="text" name="'+b.height_name+'" value="'+b.default_height+'" maxlength="'+b.max_hei_len+
'" style="width:80px;"></td></tr>\t\t\t</table>'},one:function(b,d){g.extend(!0,e,d._check_data)},check:function(b,d){var c=d.settings,a=d.getValues(),f=a[c.width_name],g=a[c.height_name];return(c=e.url(a[c.url_name])||e.width(f)||e.height(g))?(d.error(c),!1):!0},get:function(b,d){var c=d.settings,a=d.getValues(),f=a[c.url_name],e=a[c.height_name];return c.flash_mod.replace("[width]",a[c.width_name]).replace("[height]",e).replace("[url]",f)},onclose:function(){},_check_data:{},_settings:{}});var e=
{settings:{min_width:200,min_height:200,url_tips:"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u89c6\u9891\u6587\u4ef6\u5730\u5740\uff01",wid_tips:"\u5bbd\u5ea6\u5fc5\u987b\u662f\u4e00\u4e2a\u5927\u4e8e 200 \u7684\u6574\u6570\u3002",hei_tips:"\u9ad8\u5ea6\u5fc5\u987b\u662f\u4e00\u4e2a\u5927\u4e8e 200 \u7684\u6574\u6570\u3002"},url:function(b){var d=this.settings;return!b||b.length<1?d.url_tips:!/(.*)\.(swf)$/.test(b)||b.replace(".swf","").length==0?d.url_tips:null},width:function(b){var d=this.settings;
return/^[2-9]\d{2}$/.test(b)?null:d.wid_tips},height:function(b){var d=this.settings;return/^[2-9]\d{2}$/.test(b)?null:d.hei_tips}}})(jQEditor,jQuery);
(function(b){var g=["\u00b1,\u00d7,\u00f7,\u2236,\u2211,\u220f,\u222a,\u2229,\u2208,\u2237".split(","),"\u221a,\u22a5,\u2225,\u2220,\u2312,\u222b,\u222e,\u2261,\u224c,\u2248".split(","),"\u221d,\u2260,\u226e,\u226f,\u2264,\u2265,\u221e,\u2235,\u2234,\u33d1".split(","),["\u33d2"],"\uff04,\uffe0,\uffe1,\u33ce,\u338e,\u338f,\u339c,\u339d,\u339e,\u33a1".split(","),["\u33c4","\u33d5","\u2116"],"\u0101,\u00e1,\u01ce,\u00e0,\u0113,\u00e9,\u011b,\u00e8,\u012b,\u00ed".split(","),"\u01d0,\u00ec,\u014d,\u00f3,\u01d2,\u00f2,\u016b,\u00fa,\u01d4,\u00f9".split(","),
["\u01d6","\u01d8","\u01da","\u01dc","\u00fc"]];b.plugin("SpecialChar",{isNeedTitle:0,config:{width:280},style:".jqe-plugin-SpecialChar td{width:25px;height:25px;}\t\t\t.jqe-plugin-SpecialChar .special_num{background-color:#EEEEEE;border:1px solid #EEEEEE;cursor:pointer;height:20px;width:20px;line-height:20px;color:#000;display:block;text-align:center;}\t\t\t.jqe-plugin-SpecialChar a.special_num:hover{background-color:#ECF1F7;border:1px solid #AECFF7;}",init:function(){for(var b='<ul class="jqe-plugin-SpecialChar"><table>',
i=0;i<g.length;i++){var d=g[i];b+="<tr>";for(var c=0;c<d.length;c++)b+='<td><a href="javascript:void(0)" class="special_num">'+d[c]+"</a></td>";b+="</tr>"}b+="</table></ul>";this.cache.html=b},action:function(b,g,d){b=b.closest(".jqe-plugin-SpecialChar td");b.length&&(d.pasteHTML(b.text()),d.hide());return!1}})})(jQEditor,jQuery);
(function(b){b.plugin("Code",{config:{width:600,position:"center",overlay:!0},langs:{html:"HTML/XML",js:"Javascript",css:"CSS",php:"PHP",java:"Java",py:"Python",pl:"Perl",rb:"Ruby",cs:"C#",c:"C++/C",vb:"VB/ASP"},init:function(){var b='<select name="code_language" style="margin:2px 0;">';for(index in this.langs)b+='<option value="'+index+'">'+this.langs[index]+"</option>";b+='<option value="">\u5176\u4ed6</option>';b+="</select>";this.cache.html=b+'<textarea value="" name="content" style="width:99%;height:260px"></textarea>'},
check:function(b,e){var i=b.find("[name=content]").val();return!i||i.length<1?(e.error("\u4ee3\u7801\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a!"),!1):!0},get:function(g){var e=b.mod("Utils"),i=g.find("select[name=code_language]").val(),g=g.find("[name=content]").val(),g=e.escape(g);return'<pre class="prettyprint lang-'+i+'">'+g+"</pre>"}})})(jQEditor);
(function(b,g){var e=b.mod("Event"),i=b.mod("Selection"),d=b.mod("Panel");e.bind("keydown",function(c,a){var f=a.keyCode||a.which||a.charCode,j=""+i.getText();if(!a.ctrlKey&&!a.altKey&&!(a.shiftKey||f!==27))return j?b.plugin("BaikeLink").click():(f=e.getTarget(),/^(h\d|a|b|i|u|sup|sub|font)$/i.test(f.nodeName)?(g(f).replaceWith(f.innerHTML),b.monitor("esc")):d.hide()),!1});g(document).keydown(function(b){var a=b.keyCode||b.which||b.charCode;!b.ctrlKey&&!b.altKey&&!b.shiftKey&&a===27&&d.hide()})})(jQEditor,
jQuery);
(function(b){var g=b.consts,e=typeof jqe_static_url==="string"?jqe_static_url:"./";b.plugin("HdImage",{inserthtml:"custom",config:{width:350,max_width:600,position:"center",overlay:!0},settings:{static_url:"./",moreSize:!0,maxUploadSize:"5M",moreAlign:!0,selectedClass:"selectedClass",img_src_action:"baike_article_create.php",getFileAction:function(){return alert("\u6ca1\u6709\u63d0\u4f9b\u53ef\u8c03\u7528\u7684\u4e0a\u4f20\u63a5\u53e3")},getUrlAction:function(){return alert("\u6ca1\u6709\u63d0\u4f9b\u53ef\u8c03\u7528\u7684\u4e0a\u4f20\u63a5\u53e3")}},staticAttr:{inputFileName:"photofile",
inputUrlName:"img_url",uploadFileBtn:"uploadFileBtn",urlFileBtn:"urlFileBtn",uploadShowName:"uploadShowName",urlShowName:"urlShowName",imgSizeName:"picWidthHeight",imgAlignName:"picAlign",imgDiscription:"picAlt",uploadButton:"uploadButton",uploadIsBusy:!1},style:'.jqe-plugin-HdImage{width:90%;margin:0 auto;}\t\t\t.jqe-plugin-HdImage .input_tr{height:26px;}\t\t\t.jqe-plugin-HdImage .first_span{left:15px;}\t\t\t.jqe-plugin-HdImage .last_span{left:110px;}\t\t\t.jqe-plugin-HdImage .uploadBoxTop{position:relative;border-bottom:1px solid #009AD9;height:29px;margin:0 0 3px;padding:0;}\t\t\t.jqe-plugin-HdImage .uploadBoxTop span{position:absolute;top:0px;color:#666666;cursor:pointer;display:inline-block;line-height:25px;text-align:center;width:80px;border-left: 1px solid #FFFFFF;border-right: 1px solid #FFFFFF;border-top: 4px solid #FFFFFF;}\t\t\t.jqe-plugin-HdImage .uploadBoxTop span.selectedClass{background-color:#FFFFFF;cursor:default;border-left: 1px solid #009AD9;border-right: 1px solid #009AD9;border-top: 4px solid #009AD9;border-bottom:2px solid #FFFFFF;color:#333333;}\t\t\t.jqe-plugin-HdImage input,textarea{color:#111111;font-family:"lucida grande",taho,verdana,"trebuchet ms",sans-serif;font-size:12px;}\t\t\t.jqe-plugin-HdImage .inputFile{height:22px;width:260px;border:1px solid #7F9DB9;}\t\t\t.jqe-plugin-HdImage .inputUrl{height:18px;line-height:18px;width:260px;border:1px solid #7F9DB9;}\t\t\t.jqe-plugin-HdImage .tips{color:#999999;line-height:22px;text-align:left;wodr-wrap:break-word;}\t\t\t.jqe-plugin-HdImage .bgImg{height:61px;background:url("'+
e+'/skins/bg/uploadimg_bg.gif") no-repeat scroll 0 0 transparent;margin:0 0 5px 10px;border:1px solid #999999;}\t\t\t.jqe-plugin-HdImage .bgImg1{background-position:0 0px;width:70px;}\t\t\t.jqe-plugin-HdImage .bgImg2{background-position:-72px -0px;width:68px;}\t\t\t.jqe-plugin-HdImage .bgImg3{background-position:-142px 0;width:69px;}\t\t\t.jqe-plugin-HdImage .alignImg{background:url("'+e+'/skins/bg/uploadimg_bg.gif") no-repeat scroll 0 0 transparent;margin:0 0 5px 10px;height:46px;border:1px solid #999999;}\t\t\t.jqe-plugin-HdImage .alignImg1{background-position:0 -69px;width:70px}\t\t\t.jqe-plugin-HdImage .alignImg2{background-position:-71px -69px;width:68px;}\t\t\t.jqe-plugin-HdImage .alignImg3{background-position:-142px -69px;width:69px;}\t\t\t.jqe-plugin-HdImage strong{line-height:22px;}',
init:function(){var b=this.staticAttr,d=this.settings,c=d.moreAlign,a='<table class="jqe-plugin-HdImage"><tr><td colspan="3"><div class="uploadBoxTop"><span name="'+b.uploadFileBtn+'" class="'+d.selectedClass+' first_span">\u4e0a\u4f20\u56fe\u7247</span><span class="last_span" name="'+b.urlFileBtn+'">\u6dfb\u52a0url</span></div></td></tr><tr name="'+b.uploadShowName+'" class="input_tr"><td colspan="3"><input class="inputFile" type="file" name="'+b.inputFileName+'" size="35"><input type="hidden" value="'+
d.img_src_action+'" name="img_src_action"></td></tr><tr name="'+b.uploadShowName+'" class="input_tr"><td colspan="3"><label class="tips">\u56fe\u7247\u683c\u5f0f\uff1ajpg\u3001jpeg\u3001png\u3001gif\uff0c\u5927\u5c0f\u4e3a'+d.maxUploadSize+'\u4ee5\u5185</label></td></tr><tr name="'+b.urlShowName+'" style="display:none;" class="input_tr"><td colspan="3"><input type="text" class="inputUrl" name="'+b.inputUrlName+'"></td></tr><tr name="'+b.urlShowName+'" style="display:none;" class="input_tr"><td colspan="3"><label class="tips">\u6ce8:\u8bf7\u8f93\u5165\u4ee5jpg\u3001jpeg\u3001png\u3001gif\u7ed3\u675f\u7684url</label></td></tr><tr><td height="30"><strong>\u56fe\u7247\u5927\u5c0f\uff1a</strong></td><td></td><td></td></tr>';
a+=d.moreSize?'<tr><td><label><div class="bgImg bgImg1"></div><input type="radio" imgsize="_950" value="1" name="'+b.imgSizeName+'" checked="true">\u5927(\u957f\u8fb9600)</label></td><td><label><div class="bgImg bgImg2"></div><input type="radio" imgsize="_s" value="1" name="'+b.imgSizeName+'">\u4e2d(\u957f\u8fb9300)</label></td><td><label><div class="bgImg bgImg3"></div><input type="radio" imgsize="_140" value="2" name="'+b.imgSizeName+'">\u5c0f(\u957f\u8fb9140)</label></td></tr>':'<tr><td colspan="3"><table width="100%;"><tr><td style="text-align:left;"><label><div class="bgImg bgImg1"></div><input type="radio" imgsize="_s" value="1" name="'+
b.imgSizeName+'" checked="true">\u5927(\u957f\u8fb9300px)</label></td><td style="text-align:left;"><label><div class="bgImg bgImg3"></div><input type="radio" imgsize="_140" value="2" name="'+b.imgSizeName+'">\u5c0f(\u957f\u8fb9140px)</label></td></tr></table></td></tr>';a+='<tr><td height="30"><strong>\u5bf9\u9f50\u65b9\u5f0f\uff1a</strong></td><td></td><td></td></tr>';a+=c?'<tr><td><label><div class="alignImg alignImg1"></div><input type="radio" value="left" name="'+b.imgAlignName+'">\u56fe\u7247\u5c45\u5de6</label></td><td><label><div class="alignImg alignImg2"></div><input type="radio" value="center" name="'+
b.imgAlignName+'" checked="true">\u56fe\u7247\u5c45\u4e2d</label></td><td><label><div class="alignImg alignImg3"></div><input type="radio" value="right" name="'+b.imgAlignName+'">\u56fe\u7247\u5c45\u53f3</label></td></tr>':'<tr><td colspan="3"><table width="100%"><tr><td style="text-align:left;"><label><div class="alignImg alignImg1"></div><input type="radio" value="left" name="'+b.imgAlignName+'" checked="true">\u56fe\u7247\u5c45\u5de6</label></td><td style="text-align:left;"><label><div class="alignImg alignImg3"></div><input type="radio" value="right" name="'+
b.imgAlignName+'">\u56fe\u7247\u5c45\u53f3</label></td></tr></table></td></tr>';a+='<tr><td colspan="3" height="30"><strong>\u56fe\u7247\u63cf\u8ff0[<font color="red">\u5fc5\u586b</font>]\uff1a</strong></td><td></td><td></td></tr><tr><td colspan="3"><textarea style="width:95%;height:30px;" maxlength="100" name="'+b.imgDiscription+'"></textarea></td></tr></table>';this.cache.html=a},action:function(b,d,c){var a=b.attr("name");if(typeof c[a]===g.typeof_function)return c[a](b,d,c)},callback:function(b,
d){var c=d.staticAttr;b.find(":submit").replaceWith("<input type='button' value=' \u63d0 \u4ea4 ' name='"+c.uploadButton+"'>")},uploadFileBtn:function(b,d,c){var a=c.staticAttr,c=c.settings;d.find("[name="+a.uploadShowName+"]").show();d.find("[name="+a.urlShowName+"]").hide();d.find("[name="+a.urlFileBtn+"]").removeClass(c.selectedClass);b.addClass(c.selectedClass);return!1},urlFileBtn:function(b,d,c){var a=c.staticAttr,c=c.settings;d.find("[name="+a.uploadShowName+"]").hide();d.find("[name="+a.urlShowName+
"]").show();d.find("[name="+a.uploadFileBtn+"]").removeClass(c.selectedClass);b.addClass(c.selectedClass);return!1},ok:function(){},onclose:function(b,d){d.staticAttr.uploadIsBusy=!1},uploadButton:function(b,d,c){var a=c.staticAttr,f=c.settings,b=d.find("[name="+a.inputFileName+"]"),e=$.trim(d.find("[name="+a.inputUrlName+"]").val()),g=$.trim(d.find("[name="+a.imgDiscription+"]").val()),k=/^(http\:\/\/)(\w|\.|\/)+\.(jpg|jpeg|gif|png)$/i;if((d=d.find("[name="+a.uploadFileBtn+"]").attr("class").indexOf(f.selectedClass)>
-1)&&!c._checkFile(b))return c.error("\u63d0\u793a\uff1a\u8bf7\u9009\u62e9\u4e00\u4e2a\u6709\u6548\u7684\u56fe\u7247\u6587\u4ef6\uff01"),!1;else if(!d)if(e.length<1)return c.error("url\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a!"),!1;else if(!k.test(e))return c.error("url\u5730\u5740\u683c\u5f0f\u6709\u8bef!"),!1;if(g.length<1)return c.error("\u8bf7\u586b\u5199\u56fe\u7247\u63cf\u8ff0\uff0c\u826f\u597d\u7684\u63cf\u8ff0\u53ef\u4ee5\u5e2e\u52a9\u8bfb\u8005\u7406\u89e3\u56fe\u7247\uff01"),!1;else if(g.length>
500)return c.error("\u8fc7\u591a\u7684\u56fe\u7247\u63cf\u8ff0\u53ef\u80fd\u4f1a\u5f71\u54cd\u9875\u9762\u5e03\u5c40\uff01"),!1;c._uploadFile();c.lock();setTimeout(function(){c.unlock()},1E4)},_uploadFile:function(){var e=b.plugin("HdImage"),d=e.staticAttr;d.uploadIsBusy?e.error("\u8bf7\u7a0d\u540e..."):(d.uploadIsBusy=!0,$("#articleUpload_iframe").length||$("body").append('<iframe id="articleUpload_iframe" name="articleUpload_iframe" width="0" height="0"></iframe>'),e._uploadForm("articleUpload_iframe"))},
_uploadForm:function(e){var d=b.plugin("HdImage"),c=d.panel,a=d.staticAttr,f=d.settings,g=c.find("[name="+a.uploadFileBtn+"]"),c=c.find("form"),f=d.settings,e={target:e,method:"POST",onsubmit:"return true"},l=null,l=null,k="enctype";if($.browser.msie&&($.browser.version<8||document.documentMode==7))k="encoding";if(g.hasClass(f.selectedClass)){l=f.getFileAction();if(!l)return a.uploadIsBusy=!1;c[0].setAttribute(k,"multipart/form-data")}else{l=f.getUrlAction();if(!l)return a.uploadIsBusy=!1;c[0].setAttribute(k,
"application/x-www-form-urlencoded")}if(typeof l==="string")e.action=l;else if(typeof l==="object"&&(e.action=l.action,typeof l.postParms==="object")){var l=l.postParms,h;for(h in l)c.append('<input type="hidden" name="'+h+'" value="'+l[h]+'">')}c.attr(e);d.error("\u56fe\u7247\u4e0a\u4f20\u4e2d....");c[0].submit()},insert:function(e,d){var c=b.plugin("HdImage"),a=c.panel,f=c.staticAttr,g=new Image,l=e,k=a.find("[name="+f.imgSizeName+"]:checked").attr("imgsize"),l=e.replace(/_140|_s|_950/i,k);c.unlock();
g.onload=function(){var e,i,k=parseInt(g.width),n=0;e=a.find("[name="+f.imgDiscription+"]").val();!e&&$("_doc_title").length?e=$("_doc_title").val():!e&&$("title").length&&(e=$("title").val());n=k>c.config.max_width?c.config.max_width:k;i=a.find("[name="+f.imgAlignName+"]:checked").val();var p="",p="width:"+n+"px;";i=="left"?i="img_l":i=="right"?i="img_r":(i="img_c",p="width:"+n+"px;");p='<br /><br /><DIV class="img '+i+'" style="'+p+'">';d&&(p+='<A title="'+e+'" href="'+d+'" target=_blank>');p+=
'<IMG title="'+e+'" alt="'+e+'"';k>c.config.max_width&&(p+=' width="'+n+'"');p+=' src="'+l+'"/>';d&&(p+="</A>");p+="<STRONG>"+e+"</STRONG></DIV><br />";c.pasteHTML(p);c.hide();b.monitor(c.name);g.onload=function(){};f.uploadIsBusy=!1};g.onerror=function(){c.error("\u63d0\u793a\uff1a\u56fe\u7247\u63d2\u5165\u5931\u8d25\uff01");f.uploadIsBusy=!1};g.src=l},_checkFile:function(b){return b.val().length==0?!1:!/\.(jpg|jpeg|gif|png)$/i.test(b.val())?!1:!0}})})(jQEditor);
(function(b){b.addFilter("default",{type:"html",replace:function(b){if(typeof b!=="string"||!b)return b;b=b.replace(/^\s+/g,"");b=b.replace(/\s+$/g,"");b=b.replace(/>\s+</g,"><");b=b.replace(/<\/?textarea>/ig,"");b=b.replace(/<\!--[\s\S]*?--\>/gi,"");b=b.replace(/<(div|strong|span|a)[^>]*?>\s*<\/\1>/ig,"");b=b.replace(/<(span|font)>([^<]+)<\/\1>/ig,"$2");b=b.replace(/<\??xml(:\w+)?(\s+[^>]*?)?>([\s\S]*?<\/xml>)?/ig,"");b=b.replace(/<\/?(html|head|body|meta|title|iframe|frame)(\s+[^>]*?)?>/ig,"");
b=b.replace(/<link(\s+[^>]*?)?>/ig,"");b=b.replace(/<script(\s+[^>]*?)?>[\s\S]*?<\/script>/ig,"");b=b.replace(/(<\w+)(\s+[^>]*?)?\s+on(?:click|dblclick|mousedown|mouseup|mousemove|mouseover|mouseout|mouseenter|mouseleave|keydown|keypress|keyup|change|select|submit|reset|blur|focus|load|unload)\s*=\s*(["']?).*?\3((?:\s+[^>]*?)?\/?>)/ig,"$1$2$4");b=b.replace(/<style(\s+[^>]*?)?>[\s\S]*?<\/style>/ig,"");b=b.replace(/<\/(strong|b|u|strike|em|i)>((?:\s|<br\/?>|&nbsp;)*?)<\1(\s+[^>]*?)?>/ig,"$2");b=b.replace(/class=\"Apple-style-span\"/ig,
"");b=b.replace(/ jquery\d+=\"?\d+\"?/ig," ");b=b.replace(/<\!--\[if gte mso [0-9]{1,2}\]>[\s\S]*?<!\[endif\]--\>/ig,"");b=b.replace(/<style>[\s\S]*?mso[\s\S]*?<\/style>/ig,"");b=b.replace(/ lang=".+?"/ig,"");b=b.replace(/<o:p><\/o:p>/ig,"");b=b.replace(/ class="Mso.+?"/ig,"");return b=b.replace(/ mso-spacerun: 'yes'/ig,"")}})})(jQEditor,jQuery);
(function(b){var g=b.consts;b.addFilter("xhtml",{type:"html",replace:function(b){if(typeof b!="string"||!b)return b;var i,b=b.replace(/<(br|hr)>/ig,"<$1 />"),b=b.replace(/<(img[^>]*)([^\/])>/ig,"<$1$2 />");if(!g.IE)return b;i=/(<\/?)([A-Z]+)>/g;b=b.replace(i,function(b,c,a){return c+a.toLowerCase()+">"});i=/<([A-Z]+)([^>]*)>/g;return b=b.replace(i,function(b,c,a){a=a.replace(/\s([A-Z]+)=/g,function(a,b){return" "+b.toLowerCase()+"="});a=a.replace(/\s+(\w+=)(\w[^\s]+)/g,function(a,b,c){return" "+b+
'"'+c+'"'});return"<"+c.toLowerCase()+a+">"})}})})(jQEditor,jQuery);
(function(b,g){var e=/^(area|p|blockquote|center|dir|div|form|ol|ul|pre|dl|table|h[123456r]|audio|canvas|section|video)$/i,i=b.addFilter("paragraph",{replace:function(d){if(typeof d!="object"||!d.body)return d;for(var c,a=b.$("body")[0].childNodes,f=[],i=[],l=0,k=a.length;l<k;l++)if(c=a[l],1===c.nodeType)e.test(c.nodeName)?i.length&&(f.push(i),i=[]):i.push(c);else if(3===c.nodeType){var h=g.trim(b.$(c).text());h&&(b.$(c).text(h),i.push(c))}i.length&&f.push(i);l=0;for(k=f.length;l<k;l++){c=d.createElement("p");
a=f[l];b.$(a[0]).before(c);i=0;for(h=a.length;i<h;i++)b.$(c).append(a[i])}}});b.Event.bind("oncomplete",function(b){i.replace(b.dom)})})(jQEditor,jQuery);
(function(b,g){var e=location.hostname.replace(/\./g,"\\."),i=RegExp("^http:\\/\\/"+e,"i"),d=typeof g_filterExternal==="undefined"?0:g_filterExternal;b.addFilter("hdwiki",{replace:function(c){if(typeof c!="object"||!c.body)return c;b.$("a").each(function(){var a=g(this),b=a.attr("href"),c=a.text();a.is(".innerlink,.baikelink")||/innerlink/i.test(b)?a.attr("href","index.php?doc-innerlink-"+encodeURI(c)):d&&b&&(b=b.toLowerCase(),b.indexOf("http:")===0&&!i.test(b)&&a.replaceWith(a.html()))})}})})(jQEditor,
jQuery);(function(b,g){var e=/^javascript:/i;b.addFilter("xss",{replace:function(b){if(typeof b!="object"||!b.body)return b;g("a",b).each(function(){var b=g(this),c=b.attr("href");c&&(c=c.replace(/\s/g,""),e.test(c)&&b.replaceWith(b.html()))});g("img",b).each(function(){var b=g(this),c=b.attr("src");c&&(c=c.replace(/\s/g,""),e.test(c)&&b.remove())})}})})(jQEditor,jQuery);
(function(b,g){function e(){var a=b.config("tagAndDisablePlugin"),f=a["*"],e=[],l=d.getElement(),k=c.getRange();for(tagName in l)if(a[tagName])if(g.isArray(a[tagName]))e=e.concat(a[tagName]);else{e="*";break}if("*"===e)for(var h in f)b.disablePlugin(f[h]);else{for(h in f)b.enablePlugin(f[h]);if(g.isArray(e)&&e.length)for(var m in e)b.disablePlugin(e[m])}h=c.getHtml();f=""+c.getText();l={};e=null;if(i.IE){if(h)/<t(d|h)/i.test(h)&&(l.table=1),/<h2/i.test(h)&&(l.h2=1),/<h3/i.test(h)&&(l.h3=1),/<img/i.test(h)&&
(l.img=1),/<pre/i.test(h)&&(l.pre=1)}else if(f){var k=h.getRangeAt(0),k=k.cloneContents().childNodes,o;for(h=0;h<k.length;h++)o=k[h].nodeName.toLowerCase(),l[o]=1}l.talbe?e=a.selectedTable:f&&f.length>40&&(e=["BaikeLink","H1","H2"]);if(g.isArray(e)&&e.length)for(m in e)b.disablePlugin(e[m])}var i=b.consts,d=b.mod("Event"),c=b.mod("Selection");d.bind("mouseup",function(a,b){e(b)});d.bind("keyup",function(a,b){e(b)})})(jQEditor,jQuery);
(function(b,g){var e=b.mod("Event");e.bind("keydown",function(b,d){g(e.getTarget());if(d.keyCode!==13)return!0});e.bind("keyup",function(b,d){g(e.getTarget());if(d.keyCode!==13)return!0})})(jQEditor,jQuery);
(function(b,g){if(typeof g.isEmptyObject!=="function")g.isEmptyObject=function(b){if(!b||typeof b!=="object")return!0;for(var a in b)return!1;return!0};var e=b.mod("Event"),i=b.config("ctrlKeys"),d=b.config("ctrlShiftKeys");g.isEmptyObject(i)&&g.isEmptyObject(d)?b.log("run","ctrlKeys && ctrlShiftKeys is empty"):(b.log("run","shortcutKey is binded"),e.bind("keydown",function(c,a){if(!a.ctrlKey)return!0;var e=null,g=a.keyCode||a.which||a.charCode;a.ctrlKey&&!a.altKey&&(e=a.shiftKey?d[g]:i[g]);if(e)return(g=
b.plugin(e))?(g.isEnabled()&&g.click(null,g),b.log("run","\u6267\u884c\u5feb\u6377\u952e\u547d\u4ee4"+e)):b.execCommand(e,null,null),!1;else(g<16||g>18)&&b.log("run","keyCode:"+g)}))})(jQEditor,jQuery);
(function(b,g){function e(){var a=b.$("body").children(),d=b.$("body").html(),d=g.trim(d);if(d==="")return b.$("body").html(c);else if(!a.size())return b.$("body").html("<p>"+d+"</p>");a.eq(0);var a=a.eq(a.length-1),e="";a.is("p")?(e=a.html(),(e=g.trim(e))&&">"==e.substr(e.length-1)&&!a.children().last().is("br")?b.$("body").append(c):e||a.append(i.IE?"&nbsp;":"<br/>")):b.$("body").append(c);/^\s*<(h\d|table|div)/i.test(d)&&b.$("body").prepend(c)}var i=b.consts,d=b.mod("Event"),c=i.IE?"<p>&nbsp;</p>":
"<p><br></p>";d.bind("onmonitor",function(){e()});d.bind("oncomplete",function(){e()})})(jQEditor,jQuery);
(function(b,g){var e=b.mod("Panel"),i=null;b.plugin("Dialog",{title:"\u63d0\u793a",config:{width:350,position:"center",overlay:!0},show:function(b,c,a){var f=g(window).width(),a=typeof a==="number"?a:350;a<200&&(a=200);a>f&&(a=f);if(b)i.title=b;i.config.width=a;i.cache.html=c;e.set(i)},showError:function(b){i.show("\u63d0\u793a",'<table width="100%"><tr><td valign="center" align="center" style="height:150px;line-height:150%;color:red;">'+b+"</td></tr></table>")},showNotice:function(b){i.show("\u63d0\u793a",
'<table width="100%"><tr><td valign="center" align="center" style="height:180px;line-height:150%;color:#666666;">'+b+"</td></tr></table>")}});i=b.plugin("Dialog")})(jQEditor,jQuery);(function(b){var g={};b.mod("Event").bind("onafteraction",function(e){e=e.Plugin.name;g[e]?g[e]+=1:g[e]=1;b.log("run",e+"\u88ab\u70b9\u51fb\u4e86"+g[e]+"\u6b21")});b.plugin("ClickCount",{get:function(){return ClickCount}})})(jQEditor,jQuery);
(function(b,g){function e(c){b.get("document");var a=i.getElement(),d="",e="";/^(circle|disc|square)$/i.test(c)?(e="ul",d="InsertUnorderedList"):(e="ol",d="InsertOrderedList");a[e]||b.execCommand(d);b.$("ol,ul").each(function(b,d){var e=g(d),f=e.css("list-style-type");(!e.attr("style")||d===a.ol||d===a.ul)&&f!==c&&e.css("list-style-type",c)})}var i=b.mod("Event"),d=b.mod("Menu");b.plugin("InsertOrderedList",{menuType:"Menu",menuTitle:"\u66f4\u591a\u5217\u8868\u6837\u5f0f",menu:function(b,a){d.set(a.event,
a.name);return 1}});b.plugin("InsertUnorderedList",{menuType:"Menu",menuTitle:"\u66f4\u591a\u5217\u8868\u6837\u5f0f",menu:function(b,a){d.set(a.event,a.name);return 1}});d.add("InsertOrderedList",{title:"\u66f4\u591a\u5217\u8868\u6837\u5f0f\u4e0b\u62c9\u83dc\u5355",check:function(){return!0},getHtml:function(){return{List_123:1,List_a_b:1,List_A_B:1,List_i_ii:1,List_I_II:1}}});d.add("InsertUnorderedList",{title:"\u66f4\u591a\u5217\u8868\u6837\u5f0f\u4e0b\u62c9\u83dc\u5355",check:function(){return!0},
getHtml:function(){return{List_circle:1,List_disc:1,List_square:1}}});b.plugin("List_123",{click:function(){e("decimal");return!0}});b.plugin("List_a_b",{click:function(){e("lower-alpha");return!0}});b.plugin("List_A_B",{click:function(){e("upper-alpha");return!0}});b.plugin("List_i_ii",{click:function(){e("lower-roman");return!0}});b.plugin("List_I_II",{click:function(){e("upper-roman");return!0}});b.plugin("List_circle",{click:function(){e("circle");return!0}});b.plugin("List_disc",{click:function(){e("disc");
return!0}});b.plugin("List_square",{click:function(){e("square");return!0}})})(jQEditor,jQuery);(function(b){var g=b.consts.IE?"<p>&nbsp;</p>":"<p><br></p>";b.plugin("ClearDoc",{click:function(){confirm("\u786e\u5b9a\u6e05\u7a7a\u6240\u6709\u5185\u5bb9\u5417\uff1f")&&(b.setHTML(g),b.focus(),b.hidePanel())}})})(jQEditor,jQuery);
(function(b){function g(b){if(typeof b!=="string"||!b)b="Y-m-d";var c=new Date,a,e;a=c.getFullYear();e=c.getMonth()+1;c=c.getDate();return b.replace("Date_","").replace("Y",a).replace("m",e).replace("d",c)}function e(){var b=new Date;return b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()}var i=b.mod("Menu");b.plugin("InsertDate",{menuTitle:"\u66f4\u591a\u65e5\u671f\u683c\u5f0f",click:function(){this.pasteHTML("2011-08-20")},menu:function(b,c){i.set(c.event,c.name);return 1}});b.plugin("InsertTime",
{click:function(){this.pasteHTML(e())}});i.add("InsertDate",{title:"\u66f4\u591a\u65e5\u671f\u683c\u5f0f",check:function(){return!0},getHtml:function(){return{"Date_Y-m-d":1,"Date_Y/m/d":1,"Date_Y.m.d":1,"Date_Y\u5e74m\u6708d\u65e5":1}}});b.plugin("Date_Y-m-d",{click:function(b,c){this.pasteHTML(g(c.name));return!0}});b.plugin("Date_Y/m/d",{click:function(b,c){this.pasteHTML(g(c.name));return!0}});b.plugin("Date_Y.m.d",{click:function(b,c){this.pasteHTML(g(c.name));return!0}});b.plugin("Date_Y\u5e74m\u6708d\u65e5",
{click:function(b,c){this.pasteHTML(g(c.name));return!0}})})(jQEditor);
(function(b){var g;b.plugin("GoogleMap",{language:"zh-cn",config:{width:600,height:360,position:"center",overlay:!0},init:function(b){b.cache.html='<div class="jqe-plugin-googlemap" style="margin:5px 0"></div>'},iframeLoad:function(b){g=b.win},one:function(e){var e=e.find(".jqe-plugin-googlemap"),g={id:"GoogleMap",autoHeight:!0,contentEditable:!1,iframeSrc:b.config("jqePath")+"/plugin_html/GoogleMap.html",iframeStyle:{width:"100%",height:"350px",margin:"0"}};b.iframe(g,e,"")},get:function(b,i){var d=
g.Main,c=d.map,a=c.getCenter().lat()+","+c.getCenter().lng(),f=d.marker?d.marker.position:a,j=c.getZoom(),c=c.getMapTypeId();return'<img class="googlemap" src="'+("http://maps.google.com/maps/api/staticmap?center="+a+"&zoom="+j+"&size=520x340&maptype="+c+"&markers="+f+"&language="+i.language+"&sensor=false")+'" title="'+d.address+'" alt="'+d.address+'"/>'}})})(jQEditor);
(function(b){function g(b,a,e){e=e||(new Date).getHours();return e>=b&&e<a&&(!d||d.h<b||d.h>=a)?!0:!1}function e(){var b=new Date,a=b.getHours(),b=b.getMinutes();return{h:a,m:b}}function i(c){var c=c||3E3,a="";g(0,2)?a="Hi\uff01\u592a\u665a\u4e86\uff0c\u8be5\u4f11\u606f\u5566\uff0c\u6709\u4ec0\u4e48\u4e8b\u5929\u660e\u4e86\u518d\u641e\u5427":g(2,4)?a="\u600e\u4e48\u8fd8\u6ca1\u6709\u4f11\u606f\u5462\uff1f\u592a\u8f9b\u82e6\u4e86\uff0c\u8981\u4e0d\u5148\u559d\u70b9\u4ec0\u4e48\uff1f":g(4,6)?a="\u5929\u8981\u4eae\u4e86\uff0c\u6293\u7d27\u65f6\u95f4\u4f11\u606f\u4f1a\u5427\uff01":
g(6,8)?a="\u54c7\uff01\u8fd9\u4e48\u65e9\u5c31\u6765\u4e86\uff0c\u6ca1\u5403\u65e9\u9910\u7684\u8bdd\u8bb0\u5f97\u5403\u54e6\uff01":g(8,9)?a="\u65e9\u4e0a\u597d\uff01\u65e9\u9910\u5f88\u91cd\u8981\uff0c\u522b\u5fd8\u4e86\u5403\u54e6\uff01":g(12,13)?a="\u5348\u9910\u8981\u5403\u597d\uff0c\u60a8\u5403\u4e86\u5417\uff1f":g(13,14)?a="\u5348\u4f11\u65f6\u95f4\uff0c\u5efa\u8bae\u60a8\u4f11\u606f\u4e00\u4f1a":g(18,19)?a="\u665a\u9910\u65f6\u95f4\u5230\u4e86\uff0c\u665a\u9910\u53ef\u4ee5\u5c11\u5403\u4e00\u4e9b\u54e6":
g(22,23)?a="Hi\uff0c\u65e9\u70b9\u4f11\u606f\u5427\uff0c\u65e9\u7761\u65e9\u8d77\u8eab\u4f53\u68d2\uff01":g(23,24)&&(a="\u591c\u6df1\u4eba\u9759\u4e86\uff0c\u8d76\u7d27\u4f11\u606f\u5427\uff0c\u8eab\u4f53\u6bd4\u5de5\u4f5c\u66f4\u91cd\u8981\uff01");d=e();a&&b.showNotice(a,c)}var d;setTimeout(function(){var c=b.get("option");$.inArray("plugin.Hello",c.disabled)==-1&&(e(),i(5E3),setInterval(i,3E4))},2E3)})(jQEditor);
